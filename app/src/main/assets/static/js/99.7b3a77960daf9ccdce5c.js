webpackJsonp([99],{"9ueM":function(t,s){},MArP:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("mvHQ"),e=i.n(a),l=(i("NYxO"),i("fRSu")),o=i("Au9i"),n=i("cKc3"),c={name:"PublicityOssList",data:function(){return{topbar:{isShow:!0,title:""},LaberData:["品牌推广","流量推广","销售推广","会员推广","新媒体运营","微博运营","微信运营","网站运营","混合型推广"],SwitchType:"宣传案例",OssListData:[],TagsListData:[],TagsCheckid:"",shopId:"",disabledloadMore:this.disabledloadMoreCallBack,loadMore:this.loadMoreCallBack,pageNum:1,loading:!1,loadingMessage:"",loadingType:!1,loadingMessageType:!1,loadMoreCallBackType:!1,PublicityOssAllData:{},ShowTextType:!1,ShowHtml:!1}},created:function(){var t=this;if(console.log("<=================>"),this.$route.params.PublicityDetailData){if(this.OssListData=this.$route.params.PublicityDetailData,sessionStorage.setItem("OssListData",e()(this.$route.params.PublicityDetailData)),this.shopId=this.OssListData.shopInfoDO.id,this.TagsCheckid=this.OssListData.providerCaseDOList.publicgityType[0],this.OssListData.providerCaseDOList.publicityCaseInfos.forEach(function(s){s.serverType==t.TagsCheckid&&t.TagsListData.push(s)}),null==this.OssListData.providerCaseDOList)return this.ShowTextType=!0,!1;this.ShowHtml=!0}else if(sessionStorage.getItem("OssListData")){if(this.OssListData=JSON.parse(sessionStorage.getItem("OssListData")),this.shopId=this.OssListData.shopInfoDO.id,this.TagsCheckid=this.OssListData.providerCaseDOList.publicgityType[0],this.OssListData.providerCaseDOList.publicityCaseInfos.forEach(function(s){s.serverType==t.TagsCheckid&&t.TagsListData.push(s)}),null==this.OssListData.providerCaseDOList)return this.ShowTextType=!0,!1;this.ShowHtml=!0}else this.$eventHub.$on("DynamicData",function(s){console.log("DynamicData接收到数据==>",s),t.shopId=s.data,t.pageNum=1,t.getCase(),t.GetData(t.pageNum)});this.SwitchCheck("宣传案例",!1),this.$eventHub.$off("toLogin").$on("toLogin",function(t){var s=t.token;$Hybrid.$token=s})},beforeRouteLeave:function(t,s,i){"PublicityAppDetail"===t.name||"PublicityCaseDetail"===t.name?s.meta.keepAlive=!0:(s.meta.keepAlive=!1,this.$destroy()),i()},destroyed:function(){this.$eventHub.$off("DynamicData"),this.$eventHub.$off("toLogin")},components:{SearchTopbar:l.a,Toast:o.Toast},methods:{goBack:function(){sessionStorage.removeItem("PublicityCaseDetailTitle"),1===$Hybrid.routerList.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),this.$router.go(-1))},SwitchCheck:function(t,s){if(t==this.SwitchType&&s)return!1;if(this.SwitchType=t,"宣传案例"==t){if(this.PublicityOssAllData.list)return!1;this.GetData(1)}},GetData:function(t,s){var i=this;n.a.get({url:"app/case/list/all",data:{params:{shopId:this.shopId,type:4,pageNum:t,pageSize:10}}}).then(function(t){i.loadingType=!1,i.loadingMessageType=!0,i.loadMoreCallBackType=!0,console.log("所有数据",t);try{if(i.PublicityOssAllData.list.length>1&&"pageadd"==s){var a=i.PublicityOssAllData;return t.list.forEach(function(t){a.list.push(t)}),i.PublicityOssAllData=a,i.PublicityOssAllData.pageNum=t.pageNum,i.PublicityOssAllData.total=t.total,console.log("所有数据88888",t),!1}}catch(t){}t.list.length<1&&(i.loadingMessage="暂无案例"),t.total>10&&(i.loadingMessage="下拉加载更多"),t.total<10&&t.total>0&&(i.loadingMessage="已经全部加载完毕"),i.PublicityOssAllData=t,i.pageNum+=1,console.log("所有数据",i.PublicityOssAllData),console.log(i.loadingMessage)})},getCase:function(){var t=this;n.a.get({url:"app/publicity/get/case",data:{params:{shopId:this.shopId}}}).then(function(s){if(console.log("传递参数",s),t.OssListData=s,t.TagsCheckid=t.OssListData.providerCaseDOList.publicgityType[0],t.OssListData.providerCaseDOList.publicityCaseInfos.forEach(function(s){s.serverType==t.TagsCheckid&&t.TagsListData.push(s)}),null==t.OssListData.providerCaseDOList)return t.ShowTextType=!0,!1;t.ShowHtml=!0})},TagsSwitch:function(t){var s=this;this.TagsListData=[],this.OssListData.providerCaseDOList.publicityCaseInfos.forEach(function(i){i.serverType==t&&(s.TagsListData.push(i),s.TagsCheckid=i.serverType)})},GotoDetail:function(t){var s=t.id,i=t.type,a=t.flag;"server"==i?sessionStorage.setItem("PublicityCaseDetailTitle","服务详情"):sessionStorage.removeItem("PublicityCaseDetailTitle"),2==a?this.$router.push({name:"PublicityAppDetail",params:{shopId:s}}):this.$router.push({name:"PublicityCaseDetail",params:{id:s}})},TagsType:function(t){return 1==t?"品牌推广":2==t?"流量推广":3==t?"销售推广":4==t?"会员推广":5==t?"新媒体运营":6==t?"微博运营":7==t?"微信运营":8==t?"网站运营":9==t?"混合型运营":void 0},disabledloadMoreCallBack:function(){return!1},loadMoreCallBack:function(){try{if(this.PublicityOssAllData.list.length>9){if(!(1*this.PublicityOssAllData.total>1*this.PublicityOssAllData.list.length))return this.loadingMessage="已经全部加载完毕",!1;if(this.loading=!0,this.loadingType=!0,this.loadingMessageType=!1,!this.loadMoreCallBackType)return!1;this.loadMoreCallBackType=!1,this.GetData(this.PublicityOssAllData.pageNum+1,"pageadd"),console.log("分页请求")}}catch(t){}},HandClick:function(){if(!$Hybrid.$token)return $Hybrid.appToNative("toLogin"),!1;(new Date).getTime();this.addChatNum(),$Hybrid.appToNative("makeChat",e()({id:"",title:"",userId:this.OssListData.providerUserId,nickName:this.OssListData.nickName,salary:"",describe:"",tagList:[],senderAvatar:"",senderName:"",timestamp:0,jobCity:"",isinvite:!1}))},addChatNum:function(){n.a.get({url:"app/attractinvestment/communicate",data:{params:{communicateType:"6",toUser:this.OssListData.providerUserId,number:this.OssListData.shopInfoDO.id,shopId:this.OssListData.shopInfoDO.id}}})}}},r={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"PublicityOssList"}},[a("div",{staticClass:"head"},[a("div",{staticClass:"top-left",on:{click:function(s){return t.goBack()}}},[a("img",{attrs:{src:i("LHT2")}})])]),t._v(" "),t.ShowHtml?a("div",{staticClass:"dfdj"},[a("div",{staticClass:"bg-head even"},[a("div",{staticClass:"dfk-AddressInfo"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.OssListData.shopInfoDO.logo+"?x-oss-process=image/resize,w_150",expression:"OssListData.shopInfoDO.logo+'?x-oss-process=image/resize,w_150'"}],attrs:{alt:""}}),t._v(" "),a("span",{staticClass:"title"},[t._v(t._s(t.OssListData.shopInfoDO.shopName))]),t._v(" "),t.OssListData.shopInfoDO.centificationStatus?a("span",{staticClass:"btn"},[t._v("已认证")]):t._e()])]),t._v(" "),a("div",{staticClass:"background  even-top"},[a("div",{staticClass:"margin"},[a("div",{staticClass:"list-head"},[a("div",{staticClass:"head-title ",class:"服务"==t.SwitchType?"head-title-active":"",on:{click:function(s){return t.SwitchCheck("服务")}}},[a("p",[t._v(t._s(t.OssListData.typeNumber))]),t._v(" "),a("p",[t._v("服务")])]),t._v(" "),a("div",{staticClass:"head-title",class:"宣传案例"==t.SwitchType?"head-title-active":"",on:{click:function(s){return t.SwitchCheck("宣传案例")}}},[a("p",[t._v(t._s(t.PublicityOssAllData.total))]),t._v(" "),a("p",[t._v("宣传案例")])]),t._v(" "),a("div",{staticClass:"head-title",class:"公司介绍"==t.SwitchType?"head-title-active":"",on:{click:function(s){return t.SwitchCheck("公司介绍")}}},[a("p"),t._v(" "),a("p",[t._v("公司介绍")])])]),t._v(" "),"服务"==t.SwitchType?a("div",[a("div",{staticClass:"Lateral-Sliding-Box"},t._l(this.OssListData.providerCaseDOList.publicgityType,function(s,i){return a("span",{key:i,staticClass:"label-btn",class:s==t.TagsCheckid?"label-btn-active":"",on:{click:function(i){return t.TagsSwitch(s)}}},[t._v("\n                            "+t._s(t.TagsType(s))+"\n                        ")])}),0),t._v(" "),a("div",{staticClass:"server-list-box"},t._l(this.TagsListData,function(s,i){return a("div",{key:i,on:{click:function(i){return t.GotoDetail({id:s.caseId,type:"server"})}}},[i<5?a("div",{staticClass:"server-list"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.image+"?x-oss-process=image/resize,w_700",expression:"value.image+'?x-oss-process=image/resize,w_700'"}],attrs:{alt:""}}),t._v(" "),a("div",{staticClass:"list-right"},[a("p",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),a("p",{staticClass:"price"},[t._v("¥"+t._s(s.money))])])]):t._e()])}),0)]):t._e()]),t._v(" "),"宣传案例"==t.SwitchType?a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"xc",attrs:{"infinite-scroll-listen-for-event":t.disabledloadMore,"infinite-scroll-disabled":t.loading,"infinite-scroll-distance":"10"}},[a("div",{staticClass:"margin-16"},[a("div",{staticClass:"xc-list-box"},t._l(t.PublicityOssAllData.list,function(s,i){return a("div",{key:i,staticClass:"xc-list",on:{click:function(i){return t.GotoDetail({id:s.id,flag:s.type})}}},[s.imageList[0]?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.imageList[0]+"?x-oss-process=image/resize,w_700",expression:"value.imageList[0]+'?x-oss-process=image/resize,w_700'"}],attrs:{alt:""}}):t._e(),t._v(" "),a("p",[t._v(t._s(s.title))])])}),0)]),t._v(" "),a("div",{staticClass:"loading-box"},[a("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:t.loadingType,expression:"loadingType"}],attrs:{type:"fading-circle",color:"#54c2a7"}}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.loadingMessageType,expression:"loadingMessageType"}]},[t._v(t._s(t.loadingMessage))])],1)]):t._e(),t._v(" "),"公司介绍"==t.SwitchType?a("div",{staticClass:"xc company"},[a("div",{staticClass:"margin"},[a("div",{staticClass:"company-title"},[t._v("\n                        公司简介\n                    ")]),t._v(" "),a("div",{staticClass:"company-detail"},[t._v("\n                        "+t._s(this.OssListData.companyProfileDO.profile?this.OssListData.companyProfileDO.profile:"暂无公司介绍")+"\n\n                    ")]),t._v(" "),a("div",{staticClass:"company-footer"},[a("div",{staticClass:"footer-title"},[t._v("公司规模")]),t._v(" "),a("div",{staticClass:"footer-detail"},[t._v(t._s(this.OssListData.companyProfileDO.scale?this.OssListData.companyProfileDO.scale:"暂无公司规模"))])])])]):t._e()])]):t._e(),t._v(" "),t.ShowHtml?a("div",{staticClass:"footer-btn",on:{click:t.HandClick}},[t._v("\n        立即沟通\n    ")]):t._e(),t._v(" "),t.ShowTextType?a("div",{staticClass:"ShowText"},[t._v("\n        暂无案例\n    ")]):t._e()])},staticRenderFns:[]};var d=i("VU/8")(c,r,!1,function(t){i("9ueM")},"data-v-29e98621",null);s.default=d.exports}});
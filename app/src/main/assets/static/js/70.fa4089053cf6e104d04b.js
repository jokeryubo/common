webpackJsonp([70],{h0Mp:function(t,a){},vCZB:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Gu7T"),s=e.n(i),n=e("VaMN"),o=e("d4/4"),r=e("P3qA"),c=e("KgB8"),d=e("tif6"),u=e("cKc3"),l={data:function(){return{topbar:{isShow:!0,title:"办证订单",callBack:this.goBack},avtive:"全部",pageNum:1,loadMoreMessage:"已经全部加载完毕",OrderData:[],isLoading:!1,loading:!1,finished:!1}},created:function(){},mounted:function(){$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){return $Hybrid.appToNative("close"),!1}),this.GetData(0,"",this.pageNum)},components:{BaseTopbar:o.a,OrderInfoItem:d.a,Countdown:c.a,OrderTab:r.a,InfiniteScroll:n.a},methods:{goBack:function(){return $Hybrid.appToNative("close"),"bottomMsg"},onRefresh:function(){this.pageNum=1,this.finished=!0,this.loadMoreMessage="","全部"==this.avtive&&this.Switchingtype("payStatus",0,"全部"),"待审核"==this.avtive&&this.Switchingtype("auditStatus",0,"待审核"),"待付款"==this.avtive&&this.Switchingtype("payStatus",1,"待付款"),"进行中"==this.avtive&&this.Switchingtype("auditStatus",4,"进行中"),"已完成"==this.avtive&&this.Switchingtype("auditStatus",5,"已完成")},onLoadMore:function(){this.loading=!0,this.GetData(0,"",this.pageNum)},CountDownCallBack:function(){console.log(899999),this.Switchingtype("payStatus",0)},HandleClick:function(t,a){var e=this;"审核失败"==t&&this.$router.push({name:"AccreditationRequirementSub",params:{data:a}}),"交易终止"==t&&u.a.post({url:"order/order/accreditation/refund",data:{params:{orderId:a.id,auditId:a.auditId}}}).then(function(t){var a=e;a.pageNum=1,setTimeout(function(){a.GetData(0,"",a.pageNum)},500),console.log("退款结果",t)}),console.log(t),"待付款"==t&&u.a.post({url:"order/order/accreditation/pay",data:{params:{orderId:a.id,auditId:a.auditId}}}).then(function(t){var a=e;a.pageNum=1,setTimeout(function(){a.GetData(0,"",a.pageNum)},500),console.log("支付结果",t)})},GotoDetail:function(t){sessionStorage.removeItem("OrderDataID"),console.log(657874646464,t),this.$router.push({name:"DetailAccreditation",params:{data:t}})},Switchingtype:function(t,a,e){this.avtive=e,this.loadMoreMessage="",this.pageNum=1,"payStatus"==t&&this.GetData(a,"",this.pageNum,"refresh"),"auditStatus"==t&&this.GetData("",a,this.pageNum,"refresh")},licenceType:function(t){return 0==t?"工商营业执照":1==t?"食品经营许可证":2==t?"工商营业执照+食品经营许可证":void 0},businessType:function(t){return 0==t?"新办":1==t?"变更":2==t?"注销":void 0},itemClass:function(t){if("已取消"==t.statusName||"已退款"==t.statusName||"已完成"==t.statusName)return"gray"},Orderstate:function(t){return"交易终止"==t.statusName?"申请退款":"进行中"==t.statusName||"已完成"==t.statusName||"待审核"==t.statusName?"客服":"审核失败"==t.statusName?"重填资料":void 0},GetData:function(t,a,e,i){var n=this;u.a.get({url:"order/order/accreditation/get/order",data:{params:{payStatus:t,auditStatus:a,pageNum:e,pageSize:10}}}).then(function(t){n.loading=!1;var a=t.total,e=t.list;n.OrderData="refresh"!==i?[].concat(s()(n.OrderData),s()(e)):[].concat(s()(e)),console.log("OrderData-----\x3e",t,n.OrderData),n.OrderData.length>=a?n.finished=!0:(n.pageNum+=1,n.finished=!1),a>10&&a>n.OrderData.length&&(n.loadMoreMessage="下拉加载更多"),n.OrderData.length>=a&&(n.loadMoreMessage="已经全部加载完毕"),a<1&&(n.loadMoreMessage="暂无订单")})}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"OrderAccreditation"}},[e("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),e("order-tab",[e("div",{class:"全部"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",0,"全部")}}},[t._v("全部")]),t._v(" "),e("div",{class:"待审核"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("auditStatus",0,"待审核")}}},[t._v("待审核")]),t._v(" "),e("div",{class:"待付款"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",1,"待付款")}}},[t._v("待付款")]),t._v(" "),e("div",{class:"进行中"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("auditStatus",4,"进行中")}}},[t._v("进行中")]),t._v(" "),e("div",{class:"已完成"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("auditStatus",5,"已完成")}}},[t._v("已完成")])]),t._v(" "),e("div",{staticClass:"container"},[e("infinite-scroll",{attrs:{isDelayed:!0,loading:t.loading,finished:t.finished,data:t.OrderData,text:t.loadMoreMessage},on:{refresh:t.onRefresh,loadMore:t.onLoadMore}},t._l(t.OrderData,function(a,i){return e("div",{key:i,staticClass:"margin-top"},[e("div",{staticClass:"margin"},[e("div",{staticClass:"item-box",on:{click:function(e){return t.GotoDetail(a)}}},[e("div",{staticClass:"item-title"},[e("div",[t._v("下单时间")]),t._v(" "),e("div",{staticClass:"title-list"},[t._v(t._s(a.orderTime))]),t._v(" "),e("div",{staticClass:"message ",class:t.itemClass(a.codeName)},[t._v(t._s(a.codeName.statusName))])]),t._v(" "),e("OrderInfoItem",{attrs:{contentdata:{accounttype:0==a.accountType?"个体 ":"企业",licencetype:t.licenceType(a.licenceType),businesstype:t.businessType(a.businessType),shopname:[a.registerName1,a.registerName2,a.registerName3,a.registerName4]}}})],1)]),t._v(" "),e("div",{staticClass:"item-footer"},[e("div",{staticClass:"footer-list"},[t._v("实付    ￥"+t._s(a.payPrice))]),t._v(" "),e("div",{staticClass:"footer-list btn"},["审核失败"==a.codeName.statusName?e("div",{staticClass:"btn-content",on:{click:function(e){return t.HandleClick(a.codeName.statusName,a)}}},[e("span",[t._v(t._s(t.Orderstate(a.codeName)))])]):t._e(),t._v(" "),"交易终止"==a.codeName.statusName?e("div",{staticClass:"btn-content border",on:{click:function(e){return t.HandleClick(a.codeName.statusName,a)}}},[e("span",{staticClass:"black"},[t._v(t._s(t.Orderstate(a.codeName)))])]):t._e()])])])}),0)],1)],1)},staticRenderFns:[]};var p=e("VU/8")(l,v,!1,function(t){e("h0Mp")},"data-v-626cdb68",null);a.default=p.exports}});
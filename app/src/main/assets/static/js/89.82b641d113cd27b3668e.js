webpackJsonp([89],{YUHG:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("mvHQ"),i=s.n(e),r=s("bOdI"),n=s.n(r),o=(s("MY4N"),s("0zAV")),l=s("d4/4"),c=s("cKc3"),h=(s("oFuF"),s("1C0p")),d=s("cU4i"),m=s("Au9i"),u={data:function(){return{topbar:{isShow:!0,title:"基本信息",callBack:this.goBack,message:{title:"提示信息",message:"当前意向未保存，是否退出"},sureBack:this.sureBack},params:{year:this.currentYear()},startTimeType:!1,startTime:"请选择",DateBirthType:!1,specificDateCallBack:this.specificDate,headImg:"",userName:"",sex:"请选择",DateBirth:"请选择",address:"请选择",addressData:{},Evaluate:"请填写",phone:"",email:"",Uniquetext:"",slots:[{flex:1,values:["男","女"],className:"slot1",textAlign:"center"}],popState:!1,UserData:"",ID:"",hasAddr:!1,defaultAddrValue:""}},components:n()({BaseTopbar:l.a,PopupSpecificDate:h.a,Toast:m.Toast,AddressPopup:d.a},o.a.name,o.a),created:function(){},mounted:function(){if(this.phone=this.$route.params.tel,this.UserData=this.$route.params.data,this.headImg=this.$route.params.avatar,this.userName=this.$route.params.userName,console.log("data",this.UserData),this.UserData){var t=this.UserData.sex;1==t&&(this.sex="男"),0==t&&(this.sex="女"),this.ID=this.UserData.id,this.userName=this.UserData.realName,this.DateBirth=this.UserData.birthday,this.startTime=this.UserData.startJobTime,this.email=this.UserData.email,this.headImg=this.UserData.resumeAvatar,this.Evaluate=this.UserData.personalEvaluation,this.addressData.provinceId=this.UserData.addressProvinceId,this.addressData.cityId=this.UserData.addressCityId,this.address=this.UserData.addressCity,sessionStorage.setItem("OldData",i()({userName:this.UserData.realName,sex:this.sex,startTime:this.UserData.startJobTime,DateBirth:this.UserData.birthday,phone:this.phone,Evaluate:this.UserData.personalEvaluation,headImg:this.UserData.resumeAvatar,email:this.UserData.email,address:this.UserData.addressCity,addressData:{provinceId:this.UserData.addressProvinceId,cityId:this.UserData.addressCityId},ID:this.UserData.id}))}else sessionStorage.getItem("OldData")||sessionStorage.setItem("OldData",i()({userName:this.userName,sex:"请选择",startTime:"请选择",DateBirth:"请选择",phone:this.phone,Evaluate:"请填写",headImg:this.headImg,email:"",address:"请选择",addressData:{},ID:""}));if(sessionStorage.getItem("InformationData")){var a=JSON.parse(sessionStorage.getItem("InformationData"));this.userName=a.userName,this.sex=a.sex,this.ID=a.ID,this.startTime=a.startTime,this.DateBirth=a.DateBirth,this.phone=a.phone,this.Evaluate=a.Evaluate,this.headImg=a.headImg,this.address=a.address,this.email=a.email,this.addressData=a.addressData}var s=this;$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){s.GotoEvaluate("check");var a=sessionStorage.getItem("InformationData"),e=$Hybrid.routerList;if(sessionStorage.getItem("OldData")==a)return 1===e.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),s.$router.go(-1)),!1;m.MessageBox.confirm("",{title:"提示信息",message:"当前意向未保存，是否退出",showCancelButton:!0,confirmButtonClass:"msg-sure",cancelButtonClass:"msg-canel"}).then(function(t){"confirm"===t&&(sessionStorage.removeItem("InformationData"),sessionStorage.removeItem("OldData"),1===e.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),s.$router.go(-1)))})})},methods:{handleAddrCell:function(){this.hasAddr=!0},handleOverlay:function(){this.hasAddr=!1},handleAddrConfirm:function(t){this.address=t[1].name,this.addressData.provinceId=t[0].code,this.addressData.cityId=t[1].code,console.log(t),this.hasAddr=!1},sureBack:function(){sessionStorage.removeItem("InformationData"),sessionStorage.removeItem("OldData")},goBack:function(){var t=!0;this.GotoEvaluate("check");var a=sessionStorage.getItem("InformationData");return console.log(sessionStorage.getItem("OldData")+"!!!!!!!!!!!!!!!!!!!!!!!!",a),sessionStorage.getItem("OldData")!=a&&(t=!1),sessionStorage.removeItem("InformationData"),t},CheckName:function(){this.userName=this.userName.replace(/[^A-Za-z\u4e00-\u9fa5]/g,"")},currentYear:function(){return(new Date).getFullYear()},specificDate:function(t){this.startTimeType&&(this.startTime=t.year+"-"+t.month+"-"+t.day),this.DateBirthType&&(this.DateBirth=t.year+"-"+t.month+"-"+t.day)},handelClick:function(t){if("开始时间"==t)return this.startTimeType=!0,this.DateBirthType=!1,this.$refs.specificDate.$emit("handleClick"),!1;if("出生年月"==t)return this.startTimeType=!1,this.DateBirthType=!0,this.$refs.specificDate.$emit("handleClick"),!1;if("现居地"==t)return this.handleAddrCell(),!1;if("性别"==t)return this.popState=!0,!1;if("head"==t){$Hybrid.appToNative("updateImg","head");var a=this;$Hybrid.$eventHub.$off("head").$on("head",function(t){a.headImg=t.url,console.log(t)})}},GotoEvaluate:function(t){var a={};if(a.userName=this.userName,a.sex=this.sex,a.startTime=this.startTime,a.DateBirth=this.DateBirth,a.phone=this.phone,a.Evaluate=this.Evaluate,a.headImg=this.headImg,a.email=this.email,a.address=this.address,a.addressData=this.addressData,a.ID=this.ID,sessionStorage.setItem("InformationData",i()(a)),"check"==t)return!1;this.$router.push({name:"MyEvaluate"})},Save:function(){for(var t=this,a=[{value:this.headImg,message:"请上传头像"},{value:this.userName,message:"请填写姓名"},{value:this.sex,message:"请选择性别"},{value:this.DateBirth,message:"请选择出生年月"},{value:this.startTime,message:"请选择参加工作时间"},{value:this.Evaluate,message:"请填写个人评价"}],s=0;s<a.length;s++)if(""==a[s].value||"请选择"==a[s].value||"请填写"==a[s].value)return Object(m.Toast)({message:a[s].message,position:"bottom",duration:2e3}),!1;console.log(this.addressData.provinceId,this.addressData.cityId);var e="";if("男"==this.sex&&(e=1),"女"==this.sex&&(e=0),""!=this.email&&!this.checkEmail(this.email))return Object(m.Toast)({message:"邮箱填写错误，请重新填写",position:"bottom",duration:2e3}),!1;c.a.post({url:"app/resume/base",data:{params:{id:this.ID,realName:this.userName,sex:e,birthday:this.DateBirth,startJobTime:this.startTime,tel:this.phone,email:this.email,resumeAvatar:this.headImg,personalEvaluation:this.Evaluate,addressProvinceId:this.addressData.provinceId,addressCityId:this.addressData.cityId}}}).then(function(a){sessionStorage.removeItem("InformationData"),$Hybrid.routerList.pop(),t.$router.go(-1)})},popValue:function(t,a){console.log(a),this.Uniquetext=a[0]},surePop:function(){this.sex=this.Uniquetext,this.popState=!1},removePop:function(){this.popState=!1},checkEmail:function(t){var a=t;return!!new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$").test(a)}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"MyInformation"}},[e("BaseTopbar",{attrs:{topbar:t.topbar}},[e("span",{on:{click:t.Save}},[t._v("保存")])]),t._v(" "),e("div",{staticClass:"box"},[e("div",{staticClass:"margin"},[e("div",{staticClass:"list"},[t._m(0),t._v(" "),e("div",{on:{click:function(a){return t.handelClick("head")}}},[e("span",[t.headImg?t._e():e("span",[t._v("请选择")]),t._v(" "),t.headImg?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.headImg+"?x-oss-process=image/resize,w_150",expression:"headImg+'?x-oss-process=image/resize,w_150'"}],staticClass:"img-head",attrs:{alt:""}}):t._e()]),t._v(" "),e("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),t._v(" "),e("div",{staticClass:"list"},[t._m(1),t._v(" "),e("div",[e("span",[e("van-field",{staticClass:"input-text-right",attrs:{"input-align":"right",clearable:"",placeholder:"请输入姓名",maxlength:"20"},on:{input:function(a){return t.CheckName()}},model:{value:t.userName,callback:function(a){t.userName=a},expression:"userName"}})],1)])]),t._v(" "),e("div",{staticClass:"list"},[t._m(2),t._v(" "),e("div",[e("span",[e("van-field",{staticClass:"input-text-right input-width",attrs:{"input-align":"right",clearable:"",placeholder:"请输入联系邮箱"},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}})],1)])]),t._v(" "),e("div",{staticClass:"list"},[t._m(3),t._v(" "),e("div",[e("span",[t._v("\n                        "+t._s(t.phone)+"\n                    ")])])]),t._v(" "),e("div",{staticClass:"list"},[t._m(4),t._v(" "),e("div",{on:{click:function(a){return t.handelClick("性别")}}},[e("span",[t._v("\n                        "+t._s(t.sex)+"\n                    ")]),t._v(" "),e("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),t._v(" "),e("div",{staticClass:"list"},[t._m(5),t._v(" "),e("div",{on:{click:function(a){return t.handelClick("出生年月","DateBirth")}}},[e("span",[t._v(t._s(t.DateBirth))]),t._v(" "),e("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),t._v(" "),e("div",{staticClass:"list"},[t._m(6),t._v(" "),e("div",{on:{click:function(a){return t.handelClick("开始时间","startTime")}}},[e("span",[t._v(t._s(t.startTime))]),t._v(" "),e("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),t._v(" "),e("div",{staticClass:"list"},[t._m(7),t._v(" "),e("div",{on:{click:function(a){return t.handelClick("现居地")}}},[e("span",[t._v(t._s(t.address))]),t._v(" "),e("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),t._v(" "),e("div",{staticClass:"list"},[t._m(8),t._v(" "),e("div",{staticClass:"text-hidden",on:{click:t.GotoEvaluate}},[e("span",[t._v("\n                        "+t._s(this.Evaluate)+"\n                    ")]),t._v(" "),e("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])])])]),t._v(" "),e("mt-popup",{staticClass:"prop-tk",attrs:{position:"bottom"},model:{value:t.popState,callback:function(a){t.popState=a},expression:"popState"}},[e("div",{staticClass:"margin"},[e("div",{staticClass:"clR"},[e("p",{staticClass:"cancel",on:{click:t.removePop}},[t._v("取消")]),t._v(" "),e("p",{staticClass:"save",on:{click:t.surePop}},[t._v("确定")])])]),t._v(" "),e("mt-picker",{attrs:{slots:t.slots},on:{change:t.popValue}})],1),t._v(" "),e("PopupSpecificDate",{ref:"specificDate",attrs:{params:t.params,emit:t.specificDateCallBack}}),t._v(" "),e("address-popup",{attrs:{show:t.hasAddr,columnsNum:2,defaultValue:t.defaultAddrValue},on:{overlayState:t.handleOverlay,confirmData:t.handleAddrConfirm}})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("头像")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("姓名")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("联系邮箱")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("联系电话")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("性别")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("出生年月")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("参加工作时间")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("现居地")])},function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("span",{staticClass:"icon"}),this._v("个人评价")])}]};var p=s("VU/8")(u,v,!1,function(t){s("b7Hg")},"data-v-42e17ee0",null);a.default=p.exports},b7Hg:function(t,a){}});
webpackJsonp([52],{nxpF:function(t,a){},wwvc:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Gu7T"),s=e.n(i),n=e("P3qA"),r=e("VaMN"),c=e("d4/4"),o=e("KgB8"),u=e("tif6"),d=e("nRsL"),p=e("cKc3"),g={data:function(){return{topbar:{isShow:!0,title:"打包订单",callBack:this.goBack},avtive:"全部",pageNum:1,loadMoreMessage:"已经全部加载完毕",OrderData:[],isLoading:!1,loading:!1,finished:!1}},created:function(){},mounted:function(){$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){return $Hybrid.appToNative("close"),!1}),this.GetData(0,"",this.pageNum)},components:{BaseTopbar:c.a,OrderInfoItem:u.a,Countdown:o.a,OrderList:d.a,OrderTab:n.a,InfiniteScroll:r.a},methods:{goBack:function(){return $Hybrid.appToNative("close"),"bottomMsg"},onRefresh:function(){this.pageNum=1,this.finished=!0,this.loadMoreMessage="","全部"==this.avtive&&this.Switchingtype("payStatus",0,"全部"),"待付款"==this.avtive&&this.Switchingtype("payStatus",1,"待付款"),"进行中"==this.avtive&&this.Switchingtype("payStatus",4,"进行中"),"已完成"==this.avtive&&this.Switchingtype("payStatus",6,"已完成")},onLoadMore:function(){this.loading=!0,this.GetData(0,"",this.pageNum)},CountDownCallBack:function(){console.log(899999),this.Switchingtype("payStatus",0)},HandleClick:function(t,a){var e=this;"审核失败"==t&&this.$router.push({name:"AccreditationRequirementSub",params:{data:a}}),"交易终止"==t&&p.a.post({url:"order/order/accreditation/refund",data:{params:{orderId:a.id,auditId:a.auditId}}}).then(function(t){var a=e;a.pageNum=1,setTimeout(function(){a.GetData(0,"",a.pageNum)},500),console.log("退款结果",t)})},GotoDetail:function(t){console.log(657874646464,t),sessionStorage.removeItem("OrderPack"),this.$router.push({name:"DetailPack",params:{data:t}})},Switchingtype:function(t,a,e){this.avtive=e,this.loadMoreMessage="",this.pageNum=1,"payStatus"==t&&this.GetData(a,"",this.pageNum,"refresh")},statusType:function(t){return 1==t?"待付款":2==t?"待拟合同":3==t?"待签合同":4==t?"进行中":5==t?"已取消":6==t?"已完成":void 0},licenceType:function(t){return 0==t?"新办":1==t?"变更":2==t?"注销":void 0},ListData:function(t){var a=[];try{a.push({name:t.licenseProcessingDTO.name,message:t.licenseProcessingDTO.packageDTOS[0].packageName,price:"￥"+t.licenseProcessingDTO.packageDTOS[0].discountPrice})}catch(t){}try{a.push({name:t.cashRegisterSystemDTO.name,message:t.cashRegisterSystemDTO.packageDTOS[0].packageName,price:"￥"+t.cashRegisterSystemDTO.packageDTOS[0].discountPrice})}catch(t){}try{a.push({name:t.taxPendingDTO.name,message:t.taxPendingDTO.packageDTOS[0].packageName,price:"￥"+t.taxPendingDTO.packageDTOS[0].discountPrice})}catch(t){}try{a.push({name:t.fengShuiConsultingDTO.name,message:t.fengShuiConsultingDTO.packageDTOS[0].packageName,price:"￥"+t.fengShuiConsultingDTO.packageDTOS[0].discountPrice})}catch(t){}try{a.push({name:t.advertisingDesignDTO.name,message:t.advertisingDesignDTO.packageDTOS[0].packageName,price:"￥"+t.advertisingDesignDTO.packageDTOS[0].discountPrice})}catch(t){}try{a.push({name:t.promotionDTO.name,message:t.promotionDTO.packageDTOS[0].packageName,price:"￥"+t.promotionDTO.packageDTOS[0].discountPrice})}catch(t){}try{a.push({name:t.shopLeasingDTO.name,message:t.shopLeasingDTO.packageDTOS[0].packageName,price:"￥"+t.shopLeasingDTO.packageDTOS[0].discountPrice})}catch(t){}return a},beLuxuriousData:function(t){var a=[];try{a.push({name:"奢华定制",message:t.luxuryRuleDTO.name,price:"￥"+t.tailPayMoney})}catch(t){}return a},businessType:function(t){return 0==t?"工商营业执照":1==t?"食品经营许可证":2==t?"工商营业执照+食品经营许可证":void 0},itemClass:function(t){return"5"==t||"6"==t?"gray":"4"==t?"red":void 0},decorationMethodType:function(t){return 1==t?"局部改造":2==t?"清水整装":3==t?"拆旧装新":void 0},Orderstate:function(t){return"交易终止"==t?"申请退款":"4"==t||"6"==t||"2"==t||"3"==t?"客服":"审核失败"==t?"重填资料":void 0},GetData:function(t,a,e,i){var n=this;p.a.get({url:"order/packet/getAll",data:{params:{payStatus:t,pageSize:20,pageNum:e}}}).then(function(t){n.loading=!1;var a=t.total,e=t.list;n.OrderData="refresh"!==i?[].concat(s()(n.OrderData),s()(e)):[].concat(s()(e)),console.log("OrderData-----\x3e",t,n.OrderData),n.OrderData.length>=a?n.finished=!0:(n.pageNum+=1,n.finished=!1),a>10&&a>n.OrderData.length&&(n.loadMoreMessage="下拉加载更多"),n.OrderData.length>=a&&(n.loadMoreMessage="已经全部加载完毕"),a<1&&(n.loadMoreMessage="暂无订单")})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"OrderPack"}},[e("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),e("order-tab",[e("div",{class:"全部"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",0,"全部")}}},[t._v("全部")]),t._v(" "),e("div",{class:"待付款"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",1,"待付款")}}},[t._v("待付款")]),t._v(" "),e("div",{class:"进行中"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",4,"进行中")}}},[t._v("进行中")]),t._v(" "),e("div",{class:"已完成"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",6,"已完成")}}},[t._v("已完成")])]),t._v(" "),e("div",{staticClass:"container"},[e("infinite-scroll",{attrs:{isDelayed:!0,loading:t.loading,finished:t.finished,data:t.OrderData,text:t.loadMoreMessage},on:{refresh:t.onRefresh,loadMore:t.onLoadMore}},t._l(t.OrderData,function(a,i){return e("div",{key:i,staticClass:"margin-top"},[e("div",{staticClass:"margin"},[e("div",{staticClass:"item-box",on:{click:function(e){return t.GotoDetail(a)}}},[e("div",{staticClass:"item-title"},[e("div",[t._v("下单时间")]),t._v(" "),e("div",{staticClass:"title-list"},[t._v(t._s(a.createTime))]),t._v(" "),e("div",{staticClass:"message ",class:t.itemClass(a.status)},[t._v(t._s(t.statusType(a.status)))])]),t._v(" "),e("OrderList",{attrs:{datas:1==a.beLuxurious?t.beLuxuriousData(a):t.ListData(a)}})],1)]),t._v(" "),e("div",{staticClass:"item-footer"},[e("div",{staticClass:"footer-list"},[t._v("实付    ￥"+t._s(a.tailPayMoney))]),t._v(" "),e("div",{staticClass:"footer-list btn"},["交易终止"==a.status?e("div",{staticClass:"btn-content border",on:{click:function(e){return t.HandleClick(a.status,a)}}},[e("span",{staticClass:"black"},[t._v(t._s(t.Orderstate(a.status)))])]):t._e()])])])}),0)],1)],1)},staticRenderFns:[]};var v=e("VU/8")(g,l,!1,function(t){e("nxpF")},"data-v-d8b443d2",null);a.default=v.exports}});
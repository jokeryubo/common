webpackJsonp([98],{jr2e:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),r=a("d4/4"),n=a("9MSF"),o=a("Wl27"),c=a("KgB8"),m=a("lTvI"),p=a("cKc3"),u=a("Au9i"),l={data:function(){return{topbar:{isShow:!0,title:"订单确认",callBack:this.goBack,message:{},sureBack:this.sureBack},timestamp:"",name:"小明",tel:"13456784589",address:"四川省成都市武侯区天府大道中段235号",imgurl:"",mealName:"",payPrice:"",originalPrice:"",payType:"",payBack:"",agreementType:!1,sheetVisible:!1,isOverdue:!1,canPay:!0,orderNumber:"",timer:null,payIsClick:!0}},components:{BaseTopbar:r.a,MessageBox:u.MessageBox,Toast:u.Toast,AddressInfo:n.a,Payment:o.a,Countdown:c.a,PopupSure:m.a},created:function(){var e=void 0;console.log("接受参数2",this.$route.params),this.$route.params.data?(e=this.$route.params.data,sessionStorage.setItem("paramsData",i()(e))):e=JSON.parse(sessionStorage.getItem("paramsData")),this.orderNumber=e.orderNumber,this.timestamp=e.endTimestamp,this.name=e.operatorName,this.tel=e.phone,this.address=e.address,this.mealName=e.mealName,this.originalPrice=e.mealMoney,this.payPrice=e.money},mounted:function(){var e=this;$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){e.isOverdue?$Hybrid.appToNative("close"):e.sheetVisible=!0})},computed:{canPay:function(){return!!this.canPay}},methods:{goBack:function(){return sessionStorage.removeItem("paramsData"),this.isOverdue?($Hybrid.appToNative("close"),!1):(this.sheetVisible=!0,"bottomMsg")},sureBack:function(){this.sheetVisible=!1,$Hybrid.routerList.pop(),this.$router.go(-1)},goOrderLIst:function(){this.sheetVisible=!1,$Hybrid.routerList=[],this.$router.replace({name:"OrderTaxation"})},CountDownCallBack:function(){this.isOverdue=!0,this.canPay=!1},payments:function(e,t){this.payType=e,this.payBack=3==e?t:"",console.log("支付方式: ",e,t)},agreement:function(){1==this.agreementType?this.agreementType=!1:this.agreementType=!0},goPay:function(){var e=this;if(!this.canPay)return!1;if(3==this.payType){if(0==this.payIsClick)return!1;this.payIsClick=!1;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.timer=null,p.a.post({url:"order/payment/start/payment",data:{params:{payType:e.payType-1,orderNumber:e.orderNumber,amount:e.payPrice,bankCardNo:e.payBack.cardNo}}}).then(function(t){e.payIsClick=!0,e.$router.push({name:"BackPay",params:{BackPayData:t,Url:"OrderTaxation"}})})},500)}}}},d={render:function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"AccreditationRequirement"},[s("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),s("AddressInfo",{staticClass:"address",attrs:{name:t.name,tel:t.tel,address:t.address}}),t._v(" "),s("div",{staticClass:"orderContent"},[t._m(0),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"content"},[s("span",[t._v("套餐选择")]),t._v(" "),s("span",{staticClass:"meal"},[t._v(t._s(t.mealName))])])]),t._v(" "),s("div",{staticClass:"payNum"},[s("span",[t._v("支付金额")]),t._v(" "),s("span",{staticClass:"money"},[t._v("￥"+t._s(t.originalPrice))])])]),t._v(" "),s("Payment",{attrs:{emit:t.payments}}),t._v(" "),s("div",{staticClass:"bottomBox"},[s("div",{staticClass:"payContent"},[s("div",{staticClass:"left"},[s("span",[t._v("总计:")]),t._v(" "),s("span",{staticClass:"red"},[t._v("￥"+t._s(t.payPrice))])]),t._v(" "),s("div",{staticClass:"right"},[s("span",[t._v("剩余时间")]),t._v(" "),s("Countdown",{staticClass:"Countdown",attrs:{time:t.timestamp,callBack:t.CountDownCallBack}})],1)]),t._v(" "),s("div",{class:t.canPay?"gopay":"gopay gray",on:{click:function(e){return t.goPay()}}},[t._v("\n            支付\n        ")])]),t._v(" "),s("PopupSure",{attrs:{Data:{sheetVisible:t.sheetVisible,message:"您的订单没有支付成功，已生成订单，请尽快完成支付以便后期服务",removemessage:"晚点再说",sureText:"查看订单",surePop:function(){e.goOrderLIst()},removePop:function(){e.sureBack()}}}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("div",{staticClass:"icon"}),this._v(" "),t("div",[this._v("  需求单")])])}]};var v=a("VU/8")(l,d,!1,function(e){a("yghT")},"data-v-30eadfc6",null);t.default=v.exports},yghT:function(e,t){}});
webpackJsonp([30],{"2jgj":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Gu7T"),s=a.n(i),n=a("P3qA"),r=a("VaMN"),o=a("d4/4"),c=a("KgB8"),d=a("nRsL"),l=a("rqoL"),u=a("cKc3"),v={data:function(){return{topbar:{isShow:!0,title:"透明厨房订单",callBack:this.goBack},avtive:"全部",pageNum:1,loadMoreMessage:"已经全部加载完毕",OrderData:[],isLoading:!1,loading:!1,finished:!1}},created:function(){},mounted:function(){$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){return $Hybrid.appToNative("close"),!1}),this.GetData(0,"",this.pageNum)},components:{BaseTopbar:o.a,OrderList:d.a,Countdown:c.a,OrderImgItem:l.a,InfiniteScroll:r.a,OrderTab:n.a},methods:{goBack:function(){return $Hybrid.appToNative("close"),"bottomMsg"},onRefresh:function(){this.pageNum=1,this.finished=!0,this.loadMoreMessage="","全部"==this.avtive&&this.Switchingtype("payStatus",0,"全部"),"待付款"==this.avtive&&this.Switchingtype("payStatus",1,"待付款"),"进行中"==this.avtive&&this.Switchingtype("payStatus",2,"进行中"),"已完成"==this.avtive&&this.Switchingtype("payStatus",5,"已完成")},onLoadMore:function(){this.loading=!0,this.GetData(0,"",this.pageNum)},HandleClick:function(t,e){var a=this;console.log("types",t),console.log("data",e),"1"==t?console.log("去支付"):"5"==t?console.log("客服"):"8"==t&&(console.log("申请退款"),u.a.post({url:"order/kitchen/refundOrder",data:{params:{orderId:e.id}}}).then(function(t){console.log("申请退款结果",t),a.Switchingtype("payStatus",0)}))},GotoDetail:function(t){sessionStorage.removeItem("OrderKitchen"),console.log(657874646464,t),this.$router.push({name:"DetailKitchen",params:{data:t}})},Switchingtype:function(t,e,a){this.avtive=a,this.loadMoreMessage="",this.pageNum=1,"payStatus"==t&&this.GetData(e,"",this.pageNum,"refresh")},itemClass:function(t){if("3"==t||"12"==t||"5"==t)return"gray"},Orderstate:function(t){if("5"==t)return"客服"},stateText:function(t){switch(t){case 1:return"待付款";case 3:return"已取消";case 5:return"已完成";case 2:return"进行中";case 11:return"退款中";case 12:return"已退款"}},GetData:function(t,e,a,i){var n=this;u.a.get({url:"order/kitchen/get/orderAll",data:{params:{status:t,pageNum:a,pageSize:20}}}).then(function(t){n.loading=!1;var e=t.total,a=t.list;n.OrderData="refresh"!==i?[].concat(s()(n.OrderData),s()(a)):[].concat(s()(a)),console.log("OrderData-----\x3e",t,n.OrderData),n.OrderData.length>=e?n.finished=!0:(n.pageNum+=1,n.finished=!1),e>10&&e>n.OrderData.length&&(n.loadMoreMessage="下拉加载更多"),n.OrderData.length>=e&&(n.loadMoreMessage="已经全部加载完毕"),e<1&&(n.loadMoreMessage="暂无订单")})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"OrderTaxation"}},[a("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),a("order-tab",[a("div",{class:"全部"==t.avtive?"tab_active":"tab",on:{click:function(e){return t.Switchingtype("payStatus",0,"全部")}}},[t._v("全部")]),t._v(" "),a("div",{class:"待付款"==t.avtive?"tab_active":"tab",on:{click:function(e){return t.Switchingtype("payStatus",1,"待付款")}}},[t._v("待付款")]),t._v(" "),a("div",{class:"进行中"==t.avtive?"tab_active":"tab",on:{click:function(e){return t.Switchingtype("payStatus",2,"进行中")}}},[t._v("进行中")]),t._v(" "),a("div",{class:"已完成"==t.avtive?"tab_active":"tab",on:{click:function(e){return t.Switchingtype("payStatus",5,"已完成")}}},[t._v("已完成")])]),t._v(" "),a("div",{staticClass:"container"},[a("infinite-scroll",{attrs:{isDelayed:!0,loading:t.loading,finished:t.finished,data:t.OrderData,text:t.loadMoreMessage},on:{refresh:t.onRefresh,loadMore:t.onLoadMore}},t._l(t.OrderData,function(e,i){return a("div",{key:i,staticClass:"margin-top"},[a("div",{staticClass:"margin"},[a("div",{staticClass:"item-box",on:{click:function(a){return t.GotoDetail(e)}}},[a("div",{staticClass:"item-title"},[a("div",[t._v("下单时间")]),t._v(" "),a("div",{staticClass:"title-list"},[t._v(t._s(e.createTime))]),t._v(" "),a("div",{staticClass:"message ",class:t.itemClass(e.status)},[t._v(t._s(t.stateText(e.status)))])]),t._v(" "),a("OrderImgItem",{attrs:{imgUrl:e.mainImage[0].url,name:e.name,valueAddedName:e.valueAdded,valueAddedServicesName:e.valueAddedServicesName,price:e.price,num:e.number}})],1)]),t._v(" "),a("div",{staticClass:"item-footer"},[a("div",{staticClass:"footer-list"},[t._v("实付    ￥"+t._s(e.payPrice))]),t._v(" "),a("div",{staticClass:"footer-list btn"},["2"==e.status?a("div",{staticClass:"btn-content"},[a("div",{staticClass:"btn-half-conetnt",staticStyle:{width:"100%"},on:{click:function(a){return t.HandleClick("8",e)}}},[a("span",{staticClass:"black"},[t._v("申请退款")])])]):t._e()])])])}),0)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(v,g,!1,function(t){a("R8wg")},"data-v-0f28c76d",null);e.default=m.exports},R8wg:function(t,e){},cYUX:function(t,e){},rqoL:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"OrderImgItem"}},[a("div",{staticClass:"content-box",class:t.Class(t.border||"")},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl,expression:"imgUrl"}],staticClass:"img"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"left"},[a("p",{staticClass:"title"},[t._v(t._s(t.name+(t.valueAddedName?" + "+t.valueAddedName:"")+(t.valueAddedServicesName?" + "+t.valueAddedServicesName:"")))]),t._v(" "),a("p",{staticClass:"price"},[t._v("￥"+t._s(t.price))])]),t._v(" "),a("div",{staticClass:"right"},[t._v("x"+t._s(t.num))])])])])},staticRenderFns:[]};var s=a("VU/8")({props:["imgUrl","name","price","num","border","valueAddedName","valueAddedServicesName"],data:function(){return{}},components:{},mounted:function(){},methods:{Class:function(t){return"top"==t?"border-top":"bottom"==t?"border-bottom":void 0}}},i,!1,function(t){a("cYUX")},"data-v-69285a32",null);e.a=s.exports}});
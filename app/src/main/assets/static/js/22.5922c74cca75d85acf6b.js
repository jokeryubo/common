webpackJsonp([22],{"0k08":function(t,e){},E3xm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),o=i("d4/4"),n=i("cKc3"),c=i("NYxO"),r={props:["params","emit"],data:function(){return{slots:[{flex:1,defaultIndex:0,values:[],className:"slot1",textAlign:"center"},{pider:!0,content:"-"},{flex:1,values:[1],className:"slot3",textAlign:"center"}],occupationData:[],popupVisible:!1,HousekeepingData:[],RestaurantData:[]}},computed:Object(c.b)({}),created:function(){var t=this;n.a.get({url:"app/dict/occupation"}).then(function(e){t.occupationData=e,t.occupationData.forEach(function(e){t.slots[0].values.push(e.name)});for(var i=0;i<t.occupationData[0].occupationVOS.length;i++)t.RestaurantData.push(t.occupationData[0].occupationVOS[i].name);for(var s=0;s<t.occupationData[1].occupationVOS.length;s++)t.HousekeepingData.push(t.occupationData[1].occupationVOS[s].name)})},mounted:function(){this.$on("handleClick",function(){this.handleClick()}),this.params&&this.$refs.PopupOccupation.setSlotValue(0,this.params.Occupation)},watch:{},methods:{handleClick:function(){this.popupVisible=!0},sureMap:function(){var t=this.$refs.pickCom.getValues();this.popupVisible=!1;for(var e=void 0,i=0;i<this.occupationData.length;i++)for(var s=0;s<this.occupationData[i].occupationVOS.length;s++)this.occupationData[i].occupationVOS[s].name==t[2]&&(e=this.occupationData[i].occupationVOS[s].id);if(this.emit){var a={OccupationType:t[0],OccupationName:t[2],OccupationId:e};this.emit(a)}},cancle:function(){this.popupVisible=!1},onValuesChange:function(t,e){"餐饮"==e[0]&&t.setSlotValues(2,this.RestaurantData),"安保/家政"==e[0]&&t.setSlotValues(2,this.HousekeepingData)},closeTouch:function(){document.getElementsByTagName("body")[0].addEventListener("touchmove",this.handler,{passive:!1})},openTouch:function(){document.getElementsByTagName("body")[0].removeEventListener("touchmove",this.handler,{passive:!1})}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"address-selection"}},[i("mt-popup",{staticClass:"prop-tk",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"clR"},[i("p",{staticClass:"cancel",on:{click:t.cancle}},[t._v("取消")]),t._v(" "),i("p",{staticClass:"save",on:{click:t.sureMap}},[t._v("确定")])]),t._v(" "),i("mt-picker",{ref:"pickCom",attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1)],1)},staticRenderFns:[]};var l=i("VU/8")(r,p,!1,function(t){i("LabZ")},"data-v-657a6255",null).exports,u=i("cU4i"),d=i("kqsk"),h={props:["params","emit"],data:function(){return{slots:[{flex:1,defaultIndex:0,values:[],className:"slot1",textAlign:"center"},{pider:!0,content:"-"},{flex:1,values:[],className:"slot3",textAlign:"center"}],popupVisible:!1}},computed:Object(c.b)({}),created:function(){for(var t=0;t<45;t++)this.slots[0].values.push(t+"年");for(var e=1;e<46;e++)this.slots[2].values.push(e+"年")},mounted:function(){this.$on("handleClick",function(){this.handleClick()}),this.params&&this.$refs.pickCom.setSlotValue(0,this.params.year)},watch:{},methods:{handleClick:function(){this.popupVisible=!0},sureMap:function(){var t=this.$refs.pickCom.getValues();if(this.popupVisible=!1,this.emit){var e={startWorkTime:t[0],endWorkTime:t[2]};this.emit(e)}},cancle:function(){this.popupVisible=!1},onValuesChange:function(t,e){e[0].substring(0,e[0].length-1),e[2].substring(0,e[2].length-1);parseInt(e[0])>=parseInt(e[2])&&t.setSlotValue(2,parseInt(e[0])+1+"年")},closeTouch:function(){document.getElementsByTagName("body")[0].addEventListener("touchmove",this.handler,{passive:!1})},openTouch:function(){document.getElementsByTagName("body")[0].removeEventListener("touchmove",this.handler,{passive:!1})}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"address-selection"}},[i("mt-popup",{staticClass:"prop-tk",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"clR"},[i("p",{staticClass:"cancel",on:{click:t.cancle}},[t._v("取消")]),t._v(" "),i("p",{staticClass:"save",on:{click:t.sureMap}},[t._v("确定")])]),t._v(" "),i("mt-picker",{ref:"pickCom",attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1)],1)},staticRenderFns:[]};var g=i("VU/8")(h,m,!1,function(t){i("dWrI")},"data-v-af1fb1e6",null).exports,f=i("B1Az"),v=i("Au9i"),C={data:function(){return{topbar:{isShow:!0,title:"发布职位",callBack:this.goBack,message:{title:"提示信息",message:"已填的信息将丢失，确认返回？"},sureBack:this.sureBack},CompanyName:"请选择店铺",OccupationName:"请选择",intensionJobId:"",WorkTime:"请选择",Salary:"请选择",JobDescription:"请填写",CompanyDescription:"请填写",popupVisible1:!1,detialAddress:"",placetag:"请选择地区",provinceId:"",cityId:"",districtId:"",checked1:!1,params:{saveEditAddressInfo:!1,changeLocalMyinfo:!1,hasAddressInfo:!1,Address:{}},tagArr:[],jobHighlightLabel:[],maxLength:8,currentLength:0,dataList1:[{flex:1,values:[],className:"slot1",textAlign:"center"}],shopInfoArr:[],shopId:"",shopType:"",timer:null,hasAddr:!1,defaultAddrValue:""}},components:{BaseTopbar:o.a,Cell:f.a,MessageBox:v.MessageBox,Toast:v.Toast,PopupPrice:d.a,PopupWorkTime:g,PopupOccupation:l,AddressPopup:u.a},created:function(){var t=this;n.a.get({url:"app/dict/highlight_label"}).then(function(e){t.tagArr=e}),window.sessionStorage.getItem("CompanyName")&&(this.CompanyName=window.sessionStorage.getItem("CompanyName")),window.sessionStorage.getItem("companyType")&&(this.shopType=window.sessionStorage.getItem("companyType")),window.sessionStorage.getItem("companyId")&&(this.shopId=window.sessionStorage.getItem("companyId")),window.sessionStorage.getItem("OccupationName")&&(this.OccupationName=window.sessionStorage.getItem("OccupationName")),window.sessionStorage.getItem("OccupationId")&&(this.intensionJobId=window.sessionStorage.getItem("OccupationId")),window.sessionStorage.getItem("placeInfo")&&(this.placetag=JSON.parse(window.sessionStorage.getItem("placeInfo")).placetag,this.provinceId=JSON.parse(window.sessionStorage.getItem("placeInfo")).provinceId,this.cityId=JSON.parse(window.sessionStorage.getItem("placeInfo")).cityId,this.districtId=JSON.parse(window.sessionStorage.getItem("placeInfo")).districtId,this.defaultAddrValue=this.districtId.toString()),window.sessionStorage.getItem("detialAddress")&&(this.detialAddress=window.sessionStorage.getItem("detialAddress")),window.sessionStorage.getItem("WorkTime")&&(this.WorkTime=window.sessionStorage.getItem("WorkTime")),window.sessionStorage.getItem("Salary")&&(this.Salary=window.sessionStorage.getItem("Salary")),window.sessionStorage.getItem("CompanyDescription")&&(this.CompanyDescription=window.sessionStorage.getItem("CompanyDescription")),window.sessionStorage.getItem("JobDescription")&&(this.JobDescription=window.sessionStorage.getItem("JobDescription"))},mounted:function(){var t=this;$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(e){var i=$Hybrid.routerList;"请选择店铺"!=t.CompanyName||"请选择"!=t.OccupationName||"请选择地区"!=t.placetag||""!=t.detialAddress||"请选择"!=t.WorkTime||"请选择"!=t.Salary||"请填写"!=t.JobDescription||"请填写"!=t.CompanyDescription?v.MessageBox.confirm("",{title:"提示",message:"已填的信息将丢失，确认返回？",showCancelButton:!0,confirmButtonClass:"msg-sure",cancelButtonClass:"msg-canel"}).then(function(e){"confirm"===e&&(1===i.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),t.$router.go(-1)))}):$Hybrid.appToNative("close")})},computed:{cannext:function(){return"请选择店铺"!==this.CompanyName&&"请选择"!==this.OccupationName&&"请选择地区"!==this.placetag&&""!==this.detialAddress&&"请选择"!==this.WorkTime&&"请选择"!==this.Salary&&"请填写"!==this.JobDescription&&"请填写"!==this.CompanyDescription},nohightLight:function(){return"请选择店铺"===this.CompanyName&&"请选择"===this.OccupationName&&"请选择地区"===this.placetag&&""===this.detialAddress&&"请选择"===this.WorkTime&&"请选择"===this.Salary&&"请填写"===this.JobDescription&&"请填写"===this.CompanyDescription}},methods:{handleAddrCell:function(){this.hasAddr=!0},handleOverlay:function(){this.hasAddr=!1},handleAddrConfirm:function(t){this.placetag=t[0].name+"-"+t[1].name+"-"+t[2].name,this.provinceId=t[0].code,this.cityId=t[1].code,this.districtId=t[2].code,window.sessionStorage.setItem("placeInfo",a()({placetag:this.placetag,provinceId:this.provinceId,cityId:this.cityId,districtId:this.districtId})),this.hasAddr=!1},handleBlur:function(){window.scrollTo(0,0)},goBack:function(){return"请选择店铺"===this.CompanyName&&"请选择"===this.OccupationName&&"请选择地区"===this.placetag&&""===this.detialAddress&&"请选择"===this.WorkTime&&"请选择"===this.Salary&&"请填写"===this.JobDescription&&"请填写"===this.CompanyDescription},sureBack:function(){$Hybrid.appToNative("close")},PopupWorkTimeCallBack:function(t){this.WorkTime=t.startWorkTime+"-"+t.endWorkTime,window.sessionStorage.setItem("WorkTime",this.WorkTime)},PopupPriceCallBack:function(t){this.Salary=t.minprice+"-"+t.maxprice,window.sessionStorage.setItem("Salary",this.Salary)},PopupOccupationCallBack:function(t){this.intensionJobId=t.OccupationId,this.OccupationName=t.OccupationName,window.sessionStorage.setItem("OccupationName",this.OccupationName),window.sessionStorage.setItem("OccupationId",this.intensionJobId)},showPopup:function(t){var e=this;1==t?(this.popupVisible1=!0,0==this.dataList1[0].values.length&&n.a.get({url:"app/shop/info/get/All"}).then(function(t){t.nameAndIdVos.forEach(function(t,i){e.dataList1[0].values.push(t.name),e.shopInfoArr.push(t)})})):2==t?this.$refs.PopupOccupation.$emit("handleClick"):3==t?this.$refs.PopupWorkTime.$emit("handleClick"):4==t&&this.$refs.PopupPrice.$emit("handleClick")},cancel:function(){this.popupVisible1=!1},sureCasetype:function(){var t=this;this.popupVisible1=!1,this.CompanyName=this.$refs.pickCom1.getValues()[0],this.shopInfoArr.forEach(function(e,i){e.name==t.CompanyName&&(t.shopType=e.type,t.shopId=e.id,window.sessionStorage.setItem("companyId",t.shopId),window.sessionStorage.setItem("companyType",t.shopType))}),window.sessionStorage.setItem("CompanyName",this.CompanyName)},onDateChange1:function(t,e){},onchange:function(){window.sessionStorage.setItem("detialAddress",this.detialAddress)},gopage:function(t){1==t?this.$router.push("/PublishingCareer/JobDescription"):this.$router.push("/PublishingCareer/CompanyDescription")},tagchoose:function(t){var e=this;this.tagArr.forEach(function(i,s){s==t&&(i.checked=!i.checked,e.jobHighlightLabel.includes(i)?e.jobHighlightLabel.forEach(function(t,s){i.id==t.id&&(e.jobHighlightLabel.splice(s,1),e.currentLength--)}):e.currentLength<e.maxLength?(e.jobHighlightLabel.push(i),e.currentLength++):i.checked=!i.checked)})},handleClick:function(){var t=this;if(this.cannext){var e={id:window.sessionStorage.getItem("JobId")||"",companyId:this.shopId,companyType:this.shopType,intensionJobName:this.OccupationName,provinceId:this.provinceId,cityId:this.cityId,districtId:this.districtId,address:this.detialAddress,jobYearsLeft:parseInt(this.WorkTime.split("-")[0]),jobYearsRight:parseInt(this.WorkTime.split("-")[1]),fringeBenefitsLeft:this.Salary.split("-")[0],fringeBenefitsRight:this.Salary.split("-")[1],jobDescription:this.JobDescription,companyDescription:this.CompanyDescription,jobHighlightLabel:this.jobHighlightLabel,intensionJobId:this.intensionJobId};this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.timer=null,n.a.post({url:"app/recruit/position",data:{params:e}}).then(function(e){window.sessionStorage.clear(),$Hybrid.routerList=[],t.$router.replace({name:"MyRecruitHome"})})},500)}else Object(v.Toast)({message:"信息不完善，请完善",position:"bottom"})}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"AccreditationRequirement"},[i("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),i("div",{staticClass:"main"},[i("Cell",{staticClass:"item",attrs:{title:"公司信息","is-link":""}},[i("span",{staticClass:"shop-Name",on:{click:function(e){return t.showPopup(1)}}},[t._v(t._s(t.CompanyName))])]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"职位名称","is-link":""}},[i("span",{on:{click:function(e){return t.showPopup(2)}}},[t._v(t._s(t.OccupationName))])]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"工作地点",emit:t.handleAddrCell,"is-link":""}},[i("span",{staticClass:"pacle"},[t._v(t._s(t.placetag))])]),t._v(" "),i("div",{staticClass:"describeBox"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.detialAddress,expression:"detialAddress"}],staticClass:"describe",attrs:{maxlength:"50",placeholder:"请输入详细地址（精确到楼层门牌号）"},domProps:{value:t.detialAddress},on:{input:[function(e){e.target.composing||(t.detialAddress=e.target.value)},function(e){return t.onchange()}],blur:t.handleBlur}})]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"工作年限","is-link":""}},[i("span",{on:{click:function(e){return t.showPopup(3)}}},[t._v(t._s(t.WorkTime))])]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"福利待遇","is-link":""}},[i("span",{on:{click:function(e){return t.showPopup(4)}}},[t._v(t._s(t.Salary))]),t._v("元/月\n        ")]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"职位描述","is-link":"",isShow:"false"}},[i("span",{staticClass:"descript",on:{click:function(e){return t.gopage(1)}}},[t._v(t._s(t.JobDescription))])]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"公司描述","is-link":"",isShow:"false"}},[i("span",{staticClass:"descript",on:{click:function(e){return t.gopage(2)}}},[t._v(t._s(t.CompanyDescription))])]),t._v(" "),i("div",{staticClass:"tags"},[t._m(0),t._v(" "),i("div",{staticClass:"tagbox"},t._l(t.tagArr,function(e,s){return i("div",{key:s,class:e.checked?"tagItem checked":"tagItem",on:{click:function(e){return t.tagchoose(s)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])}),0)])],1),t._v(" "),i("button",{class:t.nohightLight?"saveBtn no":"saveBtn",on:{click:function(e){return t.handleClick()}}},[t._v("\n        发布职位\n    ")]),t._v(" "),i("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom"},model:{value:t.popupVisible1,callback:function(e){t.popupVisible1=e},expression:"popupVisible1"}},[i("div",{staticClass:"margin"},[i("div",{staticClass:"clR"},[i("p",{staticClass:"cancel",on:{click:function(e){return t.cancel()}}},[t._v("取消")]),t._v(" "),i("p",{staticClass:"save",on:{click:function(e){return t.sureCasetype()}}},[t._v("确定")])])]),t._v(" "),i("mt-picker",{ref:"pickCom1",attrs:{slots:t.dataList1,"visible-item-count":5,"show-toolbar":!1,"value-key":"cName"},on:{change:t.onDateChange1}})],1),t._v(" "),i("PopupPrice",{ref:"PopupPrice",attrs:{emit:t.PopupPriceCallBack}}),t._v(" "),i("PopupWorkTime",{ref:"PopupWorkTime",attrs:{emit:t.PopupWorkTimeCallBack}}),t._v(" "),i("PopupOccupation",{ref:"PopupOccupation",attrs:{emit:t.PopupOccupationCallBack}}),t._v(" "),i("address-popup",{attrs:{show:t.hasAddr,defaultValue:t.defaultAddrValue},on:{overlayState:t.handleOverlay,confirmData:t.handleAddrConfirm}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[this._v("职业亮点标签"),e("span",{staticClass:"desc"},[this._v("(最多可选择8个标签)")])])}]};var I=i("VU/8")(C,b,!1,function(t){i("0k08")},"data-v-7294cb01",null);e.default=I.exports},LabZ:function(t,e){},dWrI:function(t,e){}});
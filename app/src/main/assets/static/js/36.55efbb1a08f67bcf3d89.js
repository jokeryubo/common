webpackJsonp([36],{OyWH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=s("bOdI"),r=s.n(a),o=(s("MY4N"),s("0zAV")),c=s("d4/4"),n=s("B1Az"),l=s("cKc3"),d=s("Au9i"),u=s("LBze"),h={data:function(){return{topbar:{isShow:!0,title:"发布闲置",callBack:this.goBack,message:{title:"提示信息",message:"已填的信息将丢失，确认返回？"},sureBack:this.sureBack},title:"",describe:"",address:"成都市",price:"",tagArr:[],tagChoosed:!1,goodsType:"请选择",currentgoodsType:"",checked:!1,popupVisible1:!1,dataList:[{flex:1,values:[],className:"slot1",textAlign:"center"}],dataImgArr:[],dataImgIdArr:[],IdleEditData:{},timer:null,runFlag:!1}},components:(i={BaseTopbar:c.a,Cell:n.a,MessageBox:d.MessageBox,Toast:d.Toast},r()(i,o.a.name,o.a),r()(i,"SlickList",u.SlickList),r()(i,"SlickItem",u.SlickItem),i),created:function(){this.GetPayway(),this.address=this.$eventHub._data.$location.cityName,this.$route.params.IdleEditData&&this.GetIdleEditData(this.$route.params.IdleEditData)},mounted:function(){var t=this;$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(e){var s=$Hybrid.routerList;""!=t.title||""!=t.describe||0!=t.dataImgArr.length||"请选择"!=t.goodsType||""!=t.price?d.MessageBox.confirm("",{title:"提示",message:"已填的信息将丢失，确认返回？",showCancelButton:!0,confirmButtonClass:"msg-sure",cancelButtonClass:"msg-canel"}).then(function(e){"confirm"===e&&(1===s.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),t.$router.go(-1)))}):$Hybrid.appToNative("close")})},computed:{cannext:function(){return!!(""!==this.title&&""!==this.describe&&"请选择"!==this.goodsType&&""!==this.price&&this.tagChoosed&&this.dataImgIdArr.length>0)},nohightLight:function(){return""===this.title&&""===this.describe&&"请选择"===this.goodsType&&""===this.price&&!this.tagChoosed},describeNumber:function(){return this.describe.length||0}},methods:{goBack:function(){return""===this.title&&""===this.describe&&0==this.dataImgArr.length&&"请选择"===this.goodsType&&""===this.price},sureBack:function(){if(this.$route.params.IdleEditData)return!1;$Hybrid.appToNative("close")},GetPayway:function(){var t=this;l.a.get({url:"app/idle/mode"}).then(function(e){t.tagArr=e})},GetIdleEditData:function(t){var e=this;l.a.get({url:"app/idle/id",data:{params:{id:t}}}).then(function(t){console.log("data",t),e.title=t.title,e.describe=t.changeHandsReason,e.address=t.address,e.checked=!!t.isNew,e.goodsType=t.goodsTypeName,e.price=t.price,e.tagArr=t.transactionModes,e.tagChoosed=!0,t.fileUrls.forEach(function(t){e.dataImgArr.push(t.url),e.dataImgIdArr.push({fileId:t.fileId})})})},checkTitle:function(){this.title=this.title.replace(/[^A-Za-z0-9_\u4e00-\u9fa5]/g,"")},checkPrice:function(){this.price=this.price.replace(/[^0-9]/g,"")},inputBottom:function(t){if(document.getElementsByClassName("ReleaseIdle")[0].style.marginBottom=t+"px","iOS"==$Hybrid.$type)return!1;document.documentElement.scrollTop=t,document.body.scrollTop=t},changeStatus:function(){this.checked=!this.checked},showPopup:function(){var t=this;0==this.dataList[0].values.length&&l.a.get({url:"app/idle/goods_type"}).then(function(e){e.forEach(function(e,s){t.dataList[0].values.push(e.message)})}),this.popupVisible1=!0},cancel:function(){this.popupVisible1=!1},sureCasetype:function(){this.popupVisible1=!1,this.goodsType=this.currentgoodsType},onDateChange1:function(t,e){this.currentgoodsType=e[0]},uploadImg:function(){var t=this;$Hybrid.appToNative("updateImg","caseImg",10,!1),$Hybrid.$eventHub.$off("caseImg").$on("caseImg",function(e){t.dataImgArr.length<10?(t.dataImgArr.push(e.url),t.dataImgIdArr.push({fileId:e.id})):Object(d.Toast)({message:"最多选择10张图片",position:"bottom"})})},deleteImgItem:function(t){this.dataImgArr.splice(t,1),this.dataImgIdArr.splice(t,1)},methodsChoose:function(t){this.tagArr.forEach(function(e,s){s==t&&(e.checked=!e.checked)});for(var e=0;e<this.tagArr.length;e++)this.tagArr[0].checked||this.tagArr[1].checked||this.tagArr[2].checked?this.tagChoosed=!0:this.tagChoosed=!1},handleClick:function(){var t=this;if(this.cannext){var e={title:this.title,changeHandsReason:this.describe,address:this.address,isNew:this.checked?"1":"0",goodsTypeName:this.goodsType,price:this.price,transactionModes:this.tagArr,fileUrls:this.dataImgIdArr,id:this.$route.params.IdleEditData||""};if(this.runFlag)return;this.runFlag=!0;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.timer=null,l.a.post({url:"app/idle/add",data:{params:e}}).then(function(e){setTimeout(function(){$Hybrid.routerList=[],t.$router.push({name:"MyServerHome",params:{ReleaseIdle:"ReleaseIdle"}})},1e3)})},500)}else Object(d.Toast)({message:"信息不完善，请完善",position:"bottom"})}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ReleaseIdle"},[i("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),i("div",{staticClass:"infoBox"},[i("van-field",{staticClass:"goodstitle lineHeight-normal",attrs:{clearable:"",placeholder:"吸引买家的标题(不得多于20字)",maxlength:"20"},on:{input:function(e){return t.checkTitle()}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),i("div",{staticClass:"describeBox"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.describe,expression:"describe"}],staticClass:"describe lineHeight-normal",attrs:{maxlength:"500",placeholder:"描述转手的原因,入手渠道和使用感受"},domProps:{value:t.describe},on:{input:function(e){e.target.composing||(t.describe=e.target.value)}}}),t._v(" "),i("p",{staticClass:"textNum"},[i("span",{staticClass:"green"},[t._v(t._s(t.describeNumber))]),t._v("/500")])]),t._v(" "),i("div",{staticClass:"imgBox"},[i("span",{staticClass:"imgtag"},[t._v("上传宝贝详情（最多10张，长按可拖拽排序）")]),t._v(" "),i("SlickList",{staticClass:"imgContent",attrs:{axis:"xy",lockAxis:"xy",pressDelay:500},model:{value:t.dataImgArr,callback:function(e){t.dataImgArr=e},expression:"dataImgArr"}},[t._l(t.dataImgArr,function(e,a){return i("SlickItem",{key:a,staticClass:"imgItem",attrs:{index:a}},[i("img",{staticClass:"imgs",attrs:{src:e}}),t._v(" "),i("img",{staticClass:"deleteBtn",attrs:{src:s("fX1h")},on:{click:function(e){return t.deleteImgItem(a)}}})])}),t._v(" "),i("div",{staticClass:"imgAddBox"},[i("img",{staticClass:"imgAdd",attrs:{src:s("I0c5")},on:{click:function(e){return t.uploadImg()}}})]),t._v(" "),i("div",{staticClass:"placeholderBox"})],2)],1)],1),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:t.address,isShow:"false","is-link":""}},[i("img",{staticClass:"icon",attrs:{slot:"img",src:s("R2WG")},slot:"img"}),t._v(" "),i("div",[i("div",{staticClass:"icon-check",on:{click:t.changeStatus}},[i("span",{staticClass:"radio",class:{on:!!t.checked}}),t._v(" "),i("input",{staticClass:"input-radio",attrs:{type:"radio"},domProps:{checked:t.checked}}),t._v("\n                    全新\n                ")])])]),t._v(" "),i("Cell",{staticClass:"item",attrs:{title:"物品类型","is-link":""}},[i("span",{on:{click:function(e){return t.showPopup()}}},[t._v(t._s(t.goodsType))])]),t._v(" "),i("Cell",{staticClass:"item",attrs:{id:"bottom",title:"价格",isShow:"false","is-link":""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"price lineHeight-normal",attrs:{type:"tel",maxlength:"8",placeholder:"请输入价格"},domProps:{value:t.price},on:{focus:function(e){return t.inputBottom(240)},blur:function(e){return t.inputBottom(0)},input:[function(e){e.target.composing||(t.price=e.target.value)},function(e){return t.checkPrice()}]}}),t._v("￥\n        ")]),t._v(" "),i("div",{staticClass:"tags"},[i("p",{staticClass:"title"},[t._v("交易方式")]),t._v(" "),i("div",{staticClass:"tagbox"},t._l(t.tagArr,function(e,s){return i("div",{key:s,class:e.checked?"tagItem checked":"tagItem",on:{click:function(e){return t.methodsChoose(s)}}},[t._v("\n                    "+t._s(e.message)+"\n                ")])}),0)]),t._v(" "),i("button",{class:t.nohightLight?"saveBtn no":"saveBtn",on:{click:function(e){return t.handleClick()}}},[t._v("\n            确认发布\n        ")]),t._v(" "),i("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom"},model:{value:t.popupVisible1,callback:function(e){t.popupVisible1=e},expression:"popupVisible1"}},[i("div",{staticClass:"margin"},[i("div",{staticClass:"clR"},[i("p",{staticClass:"cancel",on:{click:function(e){return t.cancel()}}},[t._v("取消")]),t._v(" "),i("p",{staticClass:"save",on:{click:function(e){return t.sureCasetype()}}},[t._v("确定")])])]),t._v(" "),i("mt-picker",{ref:"pickCom1",attrs:{slots:t.dataList,"visible-item-count":5,"show-toolbar":!1,"value-key":"cName"},on:{change:t.onDateChange1}})],1)],1)},staticRenderFns:[]};var g=s("VU/8")(h,p,!1,function(t){s("ljdI")},"data-v-98978850",null);e.default=g.exports},R2WG:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAE6klEQVRYR8WWXWwUVRTH//+ZbavyFfQBPyAqiCAkPAroGygGYyKSlF1KCIh8RG27u92dFkSTfRAQZtudASKmfPjB1wwFIpL4AZL4QgTfDGpRQFER9QkwgHa3c4+Zbbdd2u3utppwnyZz7znnd//n3HMvcZsHb3N8DArghVfX31MVqJgnwHwAE0iMFUBBcBngORBH9I7MoX3b1lwpd2NlAdTEkg96nbKG4DIQFcWcCyRN4a608tYd3tJ0qRRISYBg1HyeCg7IO0TQQeBDgfoYuv61qshczHRUsQKZhzTBNEJ7Fr46PqTIP6Ih5KaMI8UgigIEI2aEYMp3IJBjus6V+5rjPxdzWBNpGa9EvQPi6awdEXFTcXsgmwEBguHm50g52mUoGxzLeK2UnL3zwlAkuQ7gGhGfgfMcO/ZRIfuCAKHajfdLQD9P4E6BrHMt4/Xyg/euDEXM9VkI4G9FbWJbquG3vn4KA4TNvSBrIDju2LFnAErOcG7d5qqRWscKklEA47v//ygiqb9U1fZPttR33KJEuPmzbDpE9ji2sbgkQDaHUBf8gsso75H8SvaVga6fADG5oCKCs/C82c7Wpsu5+VBD8zjx5ByJKq9TxrdtNX7Kt+2nwIJwMqYRyf7E2byeBDhTRP4QDSt1jV/6zjwlM6nQSvJeEZxy7dgT+aqFehVtcOx4tqhzox9AMJz8nMRsBdQcsOL7e3YSaV4GyE6IXEkzMPWwFf0931F33ZwhcDdElju2sTM3H4wkFxHY05XS+JwSAOZ5khNE4yS3JfZDL0DyNIDHRckyd7PxbqEUBOvNF6lxF4CvHCs+PbdmYW1ysgTQDpFzjm08WhwgYmYIBm7cHDHsaOuqmz27CJs3SN7lURtbqJr9ddXRlgd0UZcAueFYxvCc7aK6zSM9PX2t739/vl8KQuFk2u9kfQFCEfM6wGFpzxs3UIudX7dxbKWu/9o3UHXTW6P0jsBVEVx37fiIogqEIskL/vESeFNcq6m9JwVh8xTI6UNKQbRlqoj6RoDzrhWfWFYRiqglrt34QblFOD+Suq9SOr8FOXqgIhTBCdeOP1VcgbBZD9KGyKeObczNLU4kElr7leEnScyA4E8BlytVcTpQmRbVyRmE7AAxxj+Gj42+/mQikVB59bOfZEhEGl3bMIsCLAxbYxQzvxCs9KhNa0s1nMkZ+EWmKXWMxJRCp0AE3ylNm5NfpNW15sOazvZsIxJvcpvd9H1RAH8yFDZbQa4A8IVjxWb1bcWj9MxyQBryWzHAlmtexY78VuyrdvbqsOMAZwE46Fjx6r7gBe+CYN2mCdS09u57faNjG6sL7bjUv2A4uYmEkX2kIDDJsaIXywLwFy2MJpeI4D3/W6Beca3GbaUC5s8HI5teJrS3s2edWLo/FX+/kH2pB8lagm92GfIlx4r5Xa7kCOXadhf9WseOrx/IqPSTLGzWktziPyxALHat+N5iBH5wEdlBgiJS59rG1mLrSwL4xsEyIfxLB4LdfnCIrHRsY3spucoC6AtBYoFjxQ/emvPBB88mthRh/nwobK4A2SoCj+Aix465Wbh6MwRy32B2nvM7KIDuHtEDIZQ3INQJJABohKwqR/b8TQ0aIB8i5yhboFBL8++OcpUdEkBXTTRXA2oD6Be7Wn3AbjxUbtD/rMBQAg25D/yfwQr5+heFAFw/378r3wAAAABJRU5ErkJggg=="},ljdI:function(t,e){}});
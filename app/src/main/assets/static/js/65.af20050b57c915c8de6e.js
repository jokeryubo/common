webpackJsonp([65],{EQxS:function(t,e){},Xl5R:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),n=a("d4/4"),o=a("B1Az"),c=a("cU4i"),l=a("kqsk"),r=a("cKc3"),p=(a("oFuF"),a("Au9i")),h=(a("NYxO"),{data:function(){return{topbar:{isShow:!0,title:"求职意向",callBack:this.goBack,message:{title:"提示信息",message:"当前意向尚未保存，是否退出"},sureBack:this.sureBack},listData:[{name:"求职意向"},{name:"工作经历"},{name:"教育经历"}],laberData:{postLabel:[],dishesLabel:[]},params:{saveEditAddressInfo:!1,changeLocalMyinfo:!0,hasAddressInfo:!0,Address:{provinceId:1e5,cityId:101e3,districtId:101010}},PopupPriceCallBack:this.PopupPrice,City:"请选择",CityData:{},Money:"请选择",MoneyData:{},OccupationType:"请选择",Uniquetype:"",Uniquetext:"",slots:[{flex:1,values:[],className:"slot1",textAlign:"center"}],popState:!1,Data:"",ID:"",hasAddr:!1,defaultAddrValue:""}},components:{BaseTopbar:n.a,Cell:o.a,PopupPrice:l.a,Toast:p.Toast,AddressPopup:c.a},created:function(){},mounted:function(){this.Data=this.$route.params.data,this.laberData.dishesLabel=this.Data.dishesLabel,this.laberData.postLabel=this.Data.postLabel,console.log("接收参数dishesLabel",this.laberData.dishesLabel,this.laberData.postLabel),0!=this.Data.jobType&&""==this.Data.jobType&&null==this.Data.jobType||(0==this.Data.jobType&&(this.OccupationType="全职"),1==this.Data.jobType&&(this.OccupationType="兼职"),2==this.Data.jobType&&(this.OccupationType="实习")),this.Data.intensionCityId&&(this.CityData.cityId=this.Data.intensionCityId),this.Data.intensionProvinceId&&(this.CityData.provinceId=this.Data.intensionProvinceId),this.Data.jobCity&&(this.City=this.Data.jobCity),this.Data.intensionSalLeft&&(this.MoneyData.minprice=this.Data.intensionSalLeft,this.Money=this.Data.intensionSalLeft+"-"+this.Data.intensionSalRight),this.Data.intensionSalRight&&(this.MoneyData.maxprice=this.Data.intensionSalRight),this.Data&&this.Data.intensionSalLeft&&this.Data.intensionSalRight?sessionStorage.setItem("OldData",i()({dishesLabel:this.laberData.dishesLabel,postLabel:this.laberData.postLabel,OccupationType:this.OccupationType,City:this.City,Money:this.Data.intensionSalLeft+"-"+this.Data.intensionSalRight})):sessionStorage.setItem("OldData",i()({dishesLabel:this.laberData.dishesLabel,postLabel:this.laberData.postLabel,OccupationType:"请选择",City:"请选择",Money:"请选择"})),console.log(this.Data);var t=this;$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(e){t.GotoDuty("check");var a=sessionStorage.getItem("JobIntentionData"),s=$Hybrid.routerList;if(sessionStorage.getItem("OldData")==a)return 1===s.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),t.$router.go(-1)),!1;p.MessageBox.confirm("",{title:"提示信息",message:"当前意向尚未保存，是否退出",showCancelButton:!0,confirmButtonClass:"msg-sure",cancelButtonClass:"msg-canel"}).then(function(e){"confirm"===e&&(sessionStorage.removeItem("JobIntentionData"),sessionStorage.removeItem("OldData"),1===s.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),t.$router.go(-1)))})})},methods:{handleAddrCell:function(){this.hasAddr=!0},handleOverlay:function(){this.hasAddr=!1},handleAddrConfirm:function(t){this.City=t[1].name,this.CityData.provinceId=t[0].code,this.CityData.cityId=t[1].code,console.log(t),this.hasAddr=!1},showFoodLabel:function(){var t=!1;return this.laberData.postLabel.forEach(function(e){"厨师"==e.name&&1==e.type&&(t=!0)}),t},checkPost:function(t){var e=this,a=0;this.laberData.postLabel.map(function(s,i){if(t==i&&(s.type=!s.type),1==s.type&&(a+=1),a>=5)return e.laberData.postLabel[t].type=!1,Object(p.Toast)({message:"意向岗位最多选择4个",position:"bottom",duration:2e3}),!1})},checkFood:function(t){var e=this,a=0;this.laberData.dishesLabel.map(function(s,i){if(t==i&&(s.type=!s.type),1==s.type&&(a+=1),a>=9)return e.laberData.dishesLabel[t].type=!1,Object(p.Toast)({message:"擅长菜品最多选择8个",position:"bottom",duration:2e3}),!1})},sureBack:function(){sessionStorage.removeItem("JobIntentionData"),sessionStorage.removeItem("OldData")},goBack:function(){var t=!0;this.GotoDuty("check");var e=sessionStorage.getItem("JobIntentionData");return console.log(sessionStorage.getItem("OldData")+"!!!!!!!!!!!!!!!!!!!!!!!!",e),sessionStorage.getItem("OldData")!=e&&(t=!1),sessionStorage.removeItem("JobIntentionData"),t},GotoDuty:function(t){var e={dishesLabel:this.laberData.dishesLabel,postLabel:this.laberData.postLabel,OccupationType:this.OccupationType,City:this.City,Money:this.Money};if(sessionStorage.setItem("JobIntentionData",i()(e)),"check"==t)return!1},PopupPrice:function(t){this.Money=t.minprice+"-"+t.maxprice,this.MoneyData={minprice:t.minprice,maxprice:t.maxprice},console.log(t)},handelClick:function(t){return"城市"==t?(this.handleAddrCell(),!1):"薪资"==t?(this.$refs.PopupPrice.$emit("handleClick"),!1):("类型"==t&&(this.slots=[{flex:1,values:["全职","兼职","实习"],className:"slot1",textAlign:"center"}]),this.popState=!0,this.Uniquetype=t,void(document.body.style="overflow: hidden"))},Save:function(){var t=this,e=0,a=0,s=!1,i=[],n=[];if(this.laberData.postLabel.map(function(t,a){1==t.type&&(e+=1,i.push(t.name),"厨师"==t.name&&(s=!0))}),this.laberData.dishesLabel.map(function(t,e){1==t.type&&(a+=1,n.push(t.name))}),e<1)return Object(p.Toast)({message:"请选择意向岗位，至少一项。",position:"bottom",duration:2e3}),!1;if(s){if(a<1)return Object(p.Toast)({message:"请选择擅长菜品，至少一项。",position:"bottom",duration:2e3}),!1}else n=[];for(var o=[{value:this.City,message:"请选择意向城市"},{value:this.Money,message:"请选择期望月薪"},{value:this.OccupationType,message:"请选择工作类型"}],c=0;c<o.length;c++)if(""==o[c].value||"请选择"==o[c].value||"请填写"==o[c].value)return Object(p.Toast)({message:o[c].message,position:"bottom",duration:2e3}),!1;var l="";"全职"==this.OccupationType&&(l=0),"兼职"==this.OccupationType&&(l=1),"实习"==this.OccupationType&&(l=2),r.a.post({url:"app/resume/v1_3/intention",data:{params:{id:this.Data.id,jobType:l,useDishesLabel:n,usePostLabel:i,intensionProvinceId:this.CityData.provinceId,intensionCityId:this.CityData.cityId,intensionSalLeft:this.MoneyData.minprice,intensionSalRight:this.MoneyData.maxprice}}}).then(function(e){$Hybrid.routerList.pop(),t.$router.go(-1),console.log(e)})},popValue:function(t,e){console.log(t,e);e[0];"类型"==this.Uniquetype&&(this.Uniquetext=e[0])},surePop:function(){"类型"==this.Uniquetype&&(this.OccupationType=this.Uniquetext),this.popState=!1,document.body.style="overflow: auto"},removePop:function(){document.body.style="overflow: auto",console.log(111),this.popState=!1}}}),u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"JobIntention"}},[s("BaseTopbar",{attrs:{topbar:t.topbar}},[s("span",{on:{click:t.Save}},[t._v("保存")])]),t._v(" "),s("div",{staticClass:"laber_box"},[s("div",{staticClass:"margin"},[t._m(0),t._v(" "),s("div",{staticClass:"tagbox"},t._l(t.laberData.postLabel,function(e,a){return s("div",{key:a,class:e.type?"tagItem checked":"tagItem",on:{click:function(e){return t.checkPost(a)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])}),0)])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showFoodLabel(),expression:"showFoodLabel()"}],staticClass:"laber_box"},[s("div",{staticClass:"margin"},[t._m(1),t._v(" "),s("div",{staticClass:"tagbox"},t._l(t.laberData.dishesLabel,function(e,a){return s("div",{key:a,class:e.type?"tagItem checked":"tagItem",on:{click:function(e){return t.checkFood(a)}}},[t._v("\n                    "+t._s(e.name)+"\n                ")])}),0)])]),t._v(" "),s("div",{staticClass:"box"},[s("div",{staticClass:"margin"},[s("div",{staticClass:"list"},[t._m(2),t._v(" "),s("img",{staticClass:"img-icon",attrs:{src:a("uty8"),alt:""}}),t._v(" "),s("span",{staticClass:"right",on:{click:function(e){return t.handelClick("城市")}}},[t._v(t._s(t.City))])]),t._v(" "),s("div",{staticClass:"list"},[t._m(3),t._v(" "),s("img",{staticClass:"img-icon",attrs:{src:a("uty8"),alt:""}}),t._v(" "),s("span",{staticClass:"right",on:{click:function(e){return t.handelClick("薪资")}}},[t._v(t._s(t.Money))])]),t._v(" "),s("div",{staticClass:"list"},[t._m(4),t._v(" "),s("img",{staticClass:"img-icon",attrs:{src:a("uty8"),alt:""}}),t._v(" "),s("span",{staticClass:"right",on:{click:function(e){return t.handelClick("类型")}}},[t._v(t._s(t.OccupationType))])])])]),t._v(" "),s("mt-popup",{staticClass:"prop-tk",attrs:{position:"bottom"},model:{value:t.popState,callback:function(e){t.popState=e},expression:"popState"}},[s("div",{staticClass:"margin"},[s("div",{staticClass:"clR"},[s("p",{staticClass:"cancel",on:{click:t.removePop}},[t._v("取消")]),t._v(" "),s("p",{staticClass:"save",on:{click:t.surePop}},[t._v("确定")])])]),t._v(" "),s("mt-picker",{attrs:{slots:t.slots},on:{change:t.popValue}})],1),t._v(" "),s("address-popup",{attrs:{show:t.hasAddr,columnsNum:2,defaultValue:t.defaultAddrValue},on:{overlayState:t.handleOverlay,confirmData:t.handleAddrConfirm}}),t._v(" "),this.Data.intensionSalLeft<1e3?s("PopupPrice",{ref:"PopupPrice",attrs:{emit:t.PopupPriceCallBack}}):t._e(),t._v(" "),this.Data.intensionSalLeft?s("PopupPrice",{ref:"PopupPrice",attrs:{emit:t.PopupPriceCallBack,params:{minprice:this.Data.intensionSalLeft}}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"laber_title"},[e("span",[this._v("意向岗位")]),this._v("(必选1项，可多选，最多4个）\n            ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"laber_title"},[e("span",[this._v("擅长菜品")]),this._v("(必选1项，可多选，最多8个）\n            ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("意向城市")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("期望月薪")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("工作类型")])}]};var d=a("VU/8")(h,u,!1,function(t){a("EQxS")},"data-v-71131503",null);e.default=d.exports}});
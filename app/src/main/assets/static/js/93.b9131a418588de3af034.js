webpackJsonp([93],{M7pV:function(t,a){},T56D:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("Gu7T"),s=e.n(i),n=e("P3qA"),r=e("VaMN"),o=e("d4/4"),c=e("KgB8"),d=e("nRsL"),u=e("cKc3"),l={data:function(){return{topbar:{isShow:!0,title:"税务代办订单",callBack:this.goBack},avtive:"全部",pageNum:1,loadMoreMessage:"已经全部加载完毕",OrderData:[],isLoading:!1,loading:!1,finished:!1}},created:function(){},mounted:function(){$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){return $Hybrid.appToNative("close"),!1}),this.GetData(0,"",this.pageNum)},components:{BaseTopbar:o.a,OrderList:d.a,Countdown:c.a,OrderTab:n.a,InfiniteScroll:r.a},methods:{goBack:function(){return $Hybrid.appToNative("close"),"bottomMsg"},onRefresh:function(){this.pageNum=1,this.finished=!0,this.loadMoreMessage="","全部"==this.avtive&&this.Switchingtype("payStatus",0,"全部"),"待付款"==this.avtive&&this.Switchingtype("payStatus",1,"待付款"),"进行中"==this.avtive&&this.Switchingtype("payStatus",3,"进行中"),"已完成"==this.avtive&&this.Switchingtype("payStatus",4,"已完成")},onLoadMore:function(){this.loading=!0,this.GetData(0,"",this.pageNum)},CountDownCallBack:function(){this.pageNum=1,this.finished=!0,this.loadMoreMessage="",this.GetData(0,"",this.pageNum)},HandleClick:function(t,a){var e=this;"审核失败"==t&&this.$router.push({name:"AccreditationRequirementSub",params:{data:a}}),"交易终止"==t&&u.a.post({url:"order/order/accreditation/refund",data:{params:{orderId:a.id,auditId:a.auditId}}}).then(function(t){var a=e;a.pageNum=1,setTimeout(function(){a.GetData(0,"",a.pageNum)},500),console.log("退款结果",t)}),console.log(t),"待付款"==t&&u.a.post({url:"order/order/accreditation/pay",data:{params:{orderId:a.id,auditId:a.auditId}}}).then(function(t){var a=e;a.pageNum=1,setTimeout(function(){a.GetData(0,"",a.pageNum)},500),console.log("支付结果",t)})},GotoDetail:function(t){console.log(657874646464,t),sessionStorage.removeItem("OrderTaxation"),this.$router.push({name:"DetailTaxation",params:{data:t}})},Switchingtype:function(t,a,e){this.avtive=e,this.loadMoreMessage="",this.pageNum=1,"payStatus"==t&&this.GetData(a,"",this.pageNum,"refresh")},itemClass:function(t){if("6"==t||"已退款"==t||"4"==t)return"gray"},Orderstate:function(t){return"3"==t||"4"==t||"2"==t?"客服":"5"==t?"重填资料":void 0},stateText:function(t){switch(t){case 1:return"待付款";case 3:return"进行中";case 4:return"已完成";case 6:return"已取消"}},GetData:function(t,a,e,i){var n=this;u.a.get({url:"order/taxagent/orders",data:{params:{type:t,pageNum:e}}}).then(function(t){n.loading=!1;var a=t.totalNum,e=t.list;n.OrderData="refresh"!==i?[].concat(s()(n.OrderData),s()(e)):[].concat(s()(e)),console.log("OrderData-----\x3e",t,n.OrderData),n.OrderData.length>=a?n.finished=!0:(n.pageNum+=1,n.finished=!1),a>10&&a>n.OrderData.length&&(n.loadMoreMessage="下拉加载更多"),n.OrderData.length>=a&&(n.loadMoreMessage="已经全部加载完毕"),a<1&&(n.loadMoreMessage="暂无订单")})}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"OrderTaxation"}},[e("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),e("order-tab",[e("div",{class:"全部"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",0,"全部")}}},[t._v("全部")]),t._v(" "),e("div",{class:"待付款"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",1,"待付款")}}},[t._v("待付款")]),t._v(" "),e("div",{class:"进行中"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",3,"进行中")}}},[t._v("进行中")]),t._v(" "),e("div",{class:"已完成"==t.avtive?"tab_active":"tab",on:{click:function(a){return t.Switchingtype("payStatus",4,"已完成")}}},[t._v("已完成")])]),t._v(" "),e("div",{staticClass:"container"},[e("infinite-scroll",{attrs:{isDelayed:!0,loading:t.loading,finished:t.finished,data:t.OrderData,text:t.loadMoreMessage},on:{refresh:t.onRefresh,loadMore:t.onLoadMore}},t._l(t.OrderData,function(a,i){return e("div",{key:i,staticClass:"margin-top"},[e("div",{staticClass:"margin"},[e("div",{staticClass:"item-box",on:{click:function(e){return t.GotoDetail(a)}}},[e("div",{staticClass:"item-title"},[e("div",[t._v("下单时间")]),t._v(" "),e("div",{staticClass:"title-list"},[t._v(t._s(a.placeOrderTime))]),t._v(" "),e("div",{staticClass:"message ",class:t.itemClass(a.state)},[t._v(t._s(t.stateText(a.state)))])]),t._v(" "),e("OrderList",{attrs:{datas:[{name:"服务类型",message:"税务代办"},{name:"套餐选择",message:a.mealName}]}})],1)]),t._v(" "),e("div",{staticClass:"item-footer"},[e("div",{staticClass:"footer-list"},[t._v("实付    ￥"+t._s(a.payPrice))]),t._v(" "),e("div",{staticClass:"footer-list btn"})])])}),0)],1)],1)},staticRenderFns:[]};var h=e("VU/8")(l,v,!1,function(t){e("M7pV")},"data-v-33d24612",null);a.default=h.exports}});
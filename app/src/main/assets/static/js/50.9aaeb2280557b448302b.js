webpackJsonp([50],{ZEUc:function(t,e){},z7Af:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),o=s("bOdI"),n=s.n(o),c=(s("MY4N"),s("0zAV")),r=s("d4/4"),l=s("B1Az"),u=s("cKc3"),m=(s("oFuF"),s("Au9i")),h=s("1C0p"),d=s("lTvI"),p=(s("NYxO"),{data:function(){return{topbar:{isShow:!0,title:"教育经历",callBack:this.goBack,message:{title:"提示信息",message:"现在退出，将失去编辑的内容，是否确认退出？"},sureBack:this.sureBack},params:{year:this.currentYear()},sheetVisible:!1,Uniquetype:"",Uniquetext:"",slots:[{flex:1,values:[],className:"slot1",textAlign:"center"},{flex:1,values:[],className:"slot2",textAlign:"center"}],popState:!1,startTimeType:!1,endTimeType:!1,startTime:"请选择",endTime:"请选择",specificDateCallBack:this.specificDate,school:"",major:"",Education:"请选择",userResumeId:"",EduId:""}},components:n()({BaseTopbar:r.a,Cell:l.a,PopupSpecificDate:h.a,Toast:m.Toast,PopupSure:d.a},c.a.name,c.a),created:function(){},mounted:function(){var t=this;if(this.Data=this.$route.params.data,this.userResumeId=this.$route.params.ID,console.log("data",this.Data,this.$route.params.ID),this.Data){[{name:"小学",code:0},{name:"初中",code:1},{name:"高中",code:2},{name:"中专/技校",code:3},{name:"大专",code:4},{name:"本科",code:5},{name:"硕士",code:6},{name:"博士",code:7},{name:"其他",code:8}].forEach(function(e){t.Data.education==e.code&&(t.Education=e.name)}),this.EduId=this.Data.id,this.userResumeId=this.Data.userResumeId,this.school=this.Data.school,this.major=this.Data.major,this.startTime=this.Data.startTime,this.endTime=this.Data.endTime,sessionStorage.setItem("OldData",i()({Education:this.Education,EduId:this.Data.id,userResumeId:this.Data.userResumeId,school:this.Data.school,major:this.Data.major,startTime:this.Data.startTime,endTime:this.Data.endTime}))}else sessionStorage.setItem("OldData",i()({Education:"请选择",EduId:"",userResumeId:this.userResumeId,school:"",major:"",startTime:"请选择",endTime:"请选择"}));var e=this;$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(t){e.GotoDuty("check");var s=sessionStorage.getItem("EducationData"),a=$Hybrid.routerList;if(sessionStorage.getItem("OldData")==s)return 1===a.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),e.$router.go(-1)),!1;m.MessageBox.confirm("",{title:"提示信息",message:"现在退出，将失去编辑的内容，是否确认退出？",showCancelButton:!0,confirmButtonClass:"msg-sure",cancelButtonClass:"msg-canel"}).then(function(t){"confirm"===t&&(sessionStorage.removeItem("EducationData"),sessionStorage.removeItem("OldData"),1===a.length?$Hybrid.appToNative("close"):($Hybrid.routerList.pop(),e.$router.go(-1)))})})},methods:{CheckName:function(t){"major"==t&&(this.major=this.major.replace(/[^A-Za-z0-9\u4e00-\u9fa5]/g,"")),this.school=this.school.replace(/[^A-Za-z0-9\u4e00-\u9fa5]/g,"")},sureBack:function(){sessionStorage.removeItem("EducationData"),sessionStorage.removeItem("OldData")},goBack:function(){var t=!0;this.GotoDuty("check");var e=sessionStorage.getItem("EducationData");return console.log(sessionStorage.getItem("OldData")+"!!!!!!!!!!!!!!!!!!!!!!!!",e),sessionStorage.getItem("OldData")!=e&&(t=!1),sessionStorage.removeItem("EducationData"),t},currentYear:function(){return(new Date).getFullYear()},specificDate:function(t){this.startTimeType&&(this.startTime=t.year+"-"+t.month+"-"+t.day),this.endTimeType&&(this.endTime=t.year+"-"+t.month+"-"+t.day)},GotoDuty:function(t){var e={Education:this.Education,EduId:this.EduId,userResumeId:this.userResumeId,school:this.school,major:this.major,startTime:this.startTime,endTime:this.endTime};if(sessionStorage.setItem("EducationData",i()(e)),"check"==t)return!1},handelClick:function(t){return"学历"==t?(this.popState=!0,this.Uniquetype=t,this.slots=[{flex:1,values:["小学","初中","高中","中专/技校","大专","本科","硕士","博士","其他"],className:"slot1",textAlign:"center"}],!1):"入学时间"==t?(this.startTimeType=!0,this.endTimeType=!1,this.$refs.specificDate.$emit("handleClick"),!1):"毕业时间"==t?(this.startTimeType=!1,this.endTimeType=!0,this.$refs.specificDate.$emit("handleClick"),!1):void 0},popValue:function(t,e){console.log(t,e),this.Uniquetext=e[0]},surePop:function(){this.Education=this.Uniquetext,this.popState=!1},removePop:function(){this.popState=!1},Save:function(){for(var t=this,e=[{value:this.school,message:"请填写学校名称"},{value:this.major,message:"请填写专业名称"},{value:this.Education,message:"请选择学历"},{value:this.startTime,message:"请选择入学时间"},{value:this.endTime,message:"请选择毕业时间"}],s=0;s<e.length;s++)if(""==e[s].value||"请选择"==e[s].value||"请填写"==e[s].value)return Object(m.Toast)({message:e[s].message,position:"bottom",duration:2e3}),!1;var a=void 0;[{name:"小学",code:0},{name:"初中",code:1},{name:"高中",code:2},{name:"中专/技校",code:3},{name:"大专",code:4},{name:"本科",code:5},{name:"硕士",code:6},{name:"博士",code:7},{name:"其他",code:8}].forEach(function(e){t.Education==e.name&&(a=e.code)}),u.a.post({url:"app/resume/education",data:{params:{id:this.EduId,userResumeId:this.userResumeId,school:this.school,major:this.major,education:a,startTime:this.startTime,endTime:this.endTime}}}).then(function(e){sessionStorage.removeItem("EducationData"),$Hybrid.routerList.pop(),t.$router.go(-1),console.log(e)}),console.log(this.school,this.major,this.Education,this.startTime,this.endTime)},Removes:function(){var t=this;console.log(8888),u.a.delete({url:"app/resume/edu",data:{params:{id:this.EduId}}}).then(function(e){t.sheetVisible=!1,$Hybrid.routerList.pop(),t.$router.go(-1),console.log(e)})}}}),v={render:function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{attrs:{id:"Educationexperience"}},[i("BaseTopbar",{attrs:{topbar:e.topbar}},[i("span",{on:{click:e.Save}},[e._v("保存")])]),e._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"margin"},[i("div",{staticClass:"list"},[e._m(0),e._v(" "),i("span",{staticClass:"right",staticStyle:{"margin-right":"0"}},[i("van-field",{staticClass:"input-text-right input-width",attrs:{"input-align":"right",clearable:"",placeholder:"请填写",maxlength:"50"},on:{input:function(t){return e.CheckName()}},model:{value:e.school,callback:function(t){e.school=t},expression:"school"}})],1)]),e._v(" "),i("div",{staticClass:"list"},[e._m(1),e._v(" "),i("span",{staticClass:"right",staticStyle:{"margin-right":"0"}},[i("van-field",{staticClass:"input-text-right input-width",attrs:{"input-align":"right",clearable:"",placeholder:"请填写",maxlength:"50"},on:{input:function(t){return e.CheckName("major")}},model:{value:e.major,callback:function(t){e.major=t},expression:"major"}})],1)]),e._v(" "),i("div",{staticClass:"list"},[e._m(2),e._v(" "),i("div",[i("span",{staticClass:"right",on:{click:function(t){return e.handelClick("学历")}}},[e._v(e._s(e.Education))]),e._v(" "),i("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),e._v(" "),i("div",{staticClass:"list"},[e._m(3),e._v(" "),i("div",[i("span",{staticClass:"right",on:{click:function(t){return e.handelClick("入学时间","startTime")}}},[e._v(e._s(e.startTime))]),e._v(" "),i("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])]),e._v(" "),i("div",{staticClass:"list"},[e._m(4),e._v(" "),i("div",[i("span",{staticClass:"right",on:{click:function(t){return e.handelClick("毕业时间","endTime")}}},[e._v(e._s(e.endTime))]),e._v(" "),i("img",{staticClass:"img-icon",attrs:{src:s("uty8"),alt:""}})])])])]),e._v(" "),i("mt-popup",{staticClass:"prop-tk",attrs:{position:"bottom"},model:{value:e.popState,callback:function(t){e.popState=t},expression:"popState"}},[i("div",{staticClass:"margin"},[i("div",{staticClass:"clR"},[i("p",{staticClass:"cancel",on:{click:e.removePop}},[e._v("取消")]),e._v(" "),i("p",{staticClass:"save",on:{click:e.surePop}},[e._v("确定")])])]),e._v(" "),i("mt-picker",{attrs:{slots:e.slots},on:{change:e.popValue}})],1),e._v(" "),i("PopupSpecificDate",{ref:"specificDate",attrs:{params:e.params,emit:e.specificDateCallBack}}),e._v(" "),i("PopupSure",{attrs:{Data:{sheetVisible:e.sheetVisible,message:"确定删除这条教育经历吗？",sureText:"确定",surePop:this.Removes,removePop:function(){t.sheetVisible=!1}}}}),e._v(" "),this.EduId?i("div",{staticClass:"btn",on:{click:function(){t.sheetVisible=!0}}},[e._v("\n        删除此教育经历\n    ")]):e._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("学校")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("专业")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("学历")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("入学时间")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("span",{staticClass:"icon"}),this._v("毕业时间")])}]};var f=s("VU/8")(p,v,!1,function(t){s("ZEUc")},"data-v-df5e9404",null);e.default=f.exports}});
webpackJsonp([14],{YOia:function(e,t,a){e.exports=a.p+"static/img/fail.b05e9e1.png"},bV2m:function(e,t,a){e.exports=a.p+"static/img/pedding.24b9d0a.png"},c1tb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("eqfM");var i=a("/QYm"),s=a("mvHQ"),r=a.n(s),o=a("Gu7T"),n=a.n(o),c=a("P3qA"),l=a("VaMN"),m=a("d4/4"),d=a("lTvI"),v=a("B1Az"),u=a("cKc3"),p=(a("oFuF"),{name:"MyServerHome",data:function(){return{topbar:{isShow:!0,title:"我的服务",callBack:this.goBack},SwitchType:"服务列表",ServerListData:{},AttractInvestmentData:{},ShopsData:{},RemoveShopsType:!1,IdleData:{},disabledloadMore:this.disabledloadMoreCallBack,loadMore:this.loadMoreCallBack,loadingMessage:"",loadingType:!1,loadingMessageType:!1,loadMoreCallBackType:!1,CommunicateType:!1,sheetVisible:!1,RemoveDataId:void 0,pageNum:1,loadMoreMessage:"",MyServerTotal:"",MyServerData:[],isLoading:!1,loading:!1,finished:!1}},components:{BaseTopbar:m.a,Cell:v.a,PopupSure:d.a,OrderTab:c.a,InfiniteScroll:l.a},created:function(){},mounted:function(){$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(e){return $Hybrid.appToNative("close"),!1}),console.log("页面路劲",window.location.href);var e=window.location.href.split("?")[1].split("&");if(console.log("参数",e),console.log("参数2",e[9]),e[9]&&2==e[9].split("=")[1])return this.SwitchType="商铺管理",this.pageNum=1,void this.GetServerList("商铺管理","refresh");this.$route.params.ReleaseIdle?(this.SwitchType="闲置管理",this.pageNum=1,this.GetServerList("闲置管理","refresh")):"investment"==this.$route.params.choose?(this.SwitchType="招商管理",this.pageNum=1,this.GetServerList("招商管理","refresh")):(this.pageNum=1,this.GetServerList("服务列表","refresh"))},activated:function(){this.$nextTick(function(){var e=this;if(window.sessionStorage.getItem("ShopsRemoveId")){var t=window.sessionStorage.getItem("ShopsRemoveId");this.MyServerData.forEach(function(a,i){a.id==t&&e.MyServerData.splice(i,1)}),this.ResetData(),window.sessionStorage.removeItem("ShopsRemoveId")}if(window.sessionStorage.getItem("JoinRemoveId")){var a=window.sessionStorage.getItem("JoinRemoveId");this.MyServerData.forEach(function(t,i){t.number==a&&e.MyServerData.splice(i,1)}),this.ResetData(),window.sessionStorage.removeItem("JoinRemoveId")}this.$eventHub.$off("renvoation").$on("renvoation",function(t){e.SwitchType="商铺管理",e.pageNum=1,e.GetServerList("商铺管理","refresh")}),this.$route.params.ReleaseIdle&&(this.SwitchType="闲置管理",this.pageNum=1,this.GetServerList("闲置管理","refresh")),"investment"==this.$route.params.choose&&(this.SwitchType="招商管理",this.pageNum=1,this.GetServerList("招商管理","refresh")),$Hybrid.$eventHub.$off("nativeBack").$on("nativeBack",function(e){return $Hybrid.appToNative("close"),!1})})},methods:{goBack:function(){return $Hybrid.appToNative("close"),"bottomMsg"},onRefresh:function(){this.finished=!0,this.loadMoreMessage="",this.pageNum=1,this.GetServerList(this.SwitchType,"refresh")},onLoadMore:function(){this.loading=!0,this.GetServerList(this.SwitchType)},SwitchCheck:function(e){if(this.SwitchType==e)return!1;this.loadMoreMessage="",this.SwitchType=e,this.MyServerData=[],this.pageNum=1,this.GetServerList(e,"refresh")},GetServerList:function(e,t){var a=this,i=void 0,s=20;"服务列表"==e&&(i=1,s=20),"招商管理"==e&&(i=2),"商铺管理"==e&&(i=3),"闲置管理"==e&&(i=4),u.a.get({url:"app/service/management",data:{params:{pageNum:this.pageNum,pageSize:s,type:i}}}).then(function(e){a.loading=!1,a.loading=!1;var i=e.list;a.MyServerTotal=e.total,a.MyServerData="refresh"!==t?[].concat(n()(a.MyServerData),n()(i)):[].concat(n()(i)),a.MyServerData.length>=a.MyServerTotal?a.finished=!0:(a.pageNum+=1,a.finished=!1),a.MyServerTotal>10&&a.MyServerTotal>a.MyServerData.length&&(a.loadMoreMessage="下拉加载更多"),a.MyServerData.length>=a.MyServerTotal&&(a.loadMoreMessage="已经全部加载完毕"),a.MyServerTotal<1&&(a.loadMoreMessage="暂无任何记录")})},ServerListType:function(e){return console.log(",1111",e),1==e?"装修需求单":2==e?"招商加盟需求单":3==e?"店铺转让详情":4==e?"二手商品详情":5==e?"广告设计需求单":6==e?"宣传推广需求单":7==e?"采购需求单":8==e?"收银系统需求单":void 0},addChatNum:function(e,t,a){u.a.get({url:"app/attractinvestment/communicate",data:{params:{communicateType:e,toUser:t,number:a}}})},Communicate:function(e){var t=this;return!this.CommunicateType&&(this.CommunicateType=!0,1==e.communicateType?(u.a.get({url:"app/renovation/demandsheet/detail",data:{params:{demandNumber:e.number}}}).then(function(a){if(t.CommunicateType=!1,a.msg)Object(i.a)({message:a.msg,position:"bottom",duration:2e3});else{console.log("所有数据",a),t.addChatNum(e.communicateType,e.toUser,a.number);var s=(new Date).getTime();$Hybrid.appToNative("makeChat",r()({id:a.number,title:"装修需求单",userId:a.serviceProviderUserId,nickName:a.serviceNickName,salary:"",describe:"装修地址："+a.address,tagList:[t.styleText(a.decorationMethod),a.area+"㎡",a.decorationType,a.decorationStyle,a.budget+"万"],senderAvatar:"",senderName:"",timestamp:s,jobCity:"",isinvite:!1,url:"/#/MyServerHome/ServerDetail",detaildata:e}))}}),!1):2==e.communicateType?(u.a.get({url:"app/attractinvestment/detail",data:{params:{number:e.number}}}).then(function(a){if(t.CommunicateType=!1,a.msg)$Hybrid.appToNative("makeChat",r()({id:"",title:"",userId:e.toUser,nickName:e.name,salary:"",describe:"",tagList:"",senderAvatar:"",senderName:"",timestamp:"",jobCity:"",isinvite:!1,url:"",detaildata:""}));else{console.log("所有数据",a),t.addChatNum(e.communicateType,e.toUser,a.number);var i=(new Date).getTime();$Hybrid.appToNative("makeChat",r()({id:a.number,title:"招商加盟需求单",userId:a.toUserId,nickName:a.toUserName,salary:"",describe:a.describe,tagList:[a.projectName,a.cost+"万"],senderAvatar:"",senderName:"",timestamp:i,jobCity:"",isinvite:!1,url:"/#/MyServerHome/ServerDetail",detaildata:e}))}}),!1):3==e.communicateType?(u.a.get({url:"app/store/info/get",data:{params:{id:e.number}}}).then(function(a){if(t.CommunicateType=!1,a.msg)$Hybrid.appToNative("makeChat",r()({id:"",title:"",userId:e.toUser,nickName:e.name,salary:"",describe:"",tagList:"",senderAvatar:"",senderName:"",timestamp:"",jobCity:"",isinvite:!1,url:"",detaildata:""}));else{console.log("所有数据",a),t.addChatNum(e.communicateType,e.toUser,a.id);var i=(new Date).getTime();$Hybrid.appToNative("makeChat",r()({id:a.id,title:"商铺转让信息",userId:a.providerUserId,nickName:a.nickName,salary:"",describe:"转让地址："+a.location,tagList:[a.title,"转让费"+a.transferFee+"万"],senderAvatar:"",senderName:"",timestamp:i,jobCity:"",isinvite:!1,url:"/#/MyServerHome/ListShopsDetail",detaildata:e}))}}),!1):4==e.communicateType?(u.a.get({url:"app/idle/number",data:{params:{number:e.number}}}).then(function(a){if(t.CommunicateType=!1,a.msg)$Hybrid.appToNative("makeChat",r()({id:"",title:"",userId:e.toUser,nickName:e.name,salary:"",describe:"",tagList:"",senderAvatar:"",senderName:"",timestamp:"",jobCity:"",isinvite:!1,url:"",detaildata:""}));else{var i=(new Date).getTime(),s=void 0;a.transactionModes.forEach(function(e){e.checked&&(s=e.message)}),t.addChatNum(e.communicateType,e.toUser,a.number),$Hybrid.appToNative("makeChat",r()({id:a.number,title:"闲置商品信息",userId:a.clientUserSimpleVO.id,nickName:a.clientUserSimpleVO.nickName,salary:"",describe:a.changeHandsReason+"交易方式："+s,tagList:[a.title,a.isNew?"全新":"二手",a.goodsTypeName,"￥"+a.price],senderAvatar:"",senderName:"",timestamp:i,jobCity:"",isinvite:!1,url:"/#/MyServerHome/SecondhandShopDetail",detaildata:e}))}}).catch(function(e){console.log("===========================",e)}),!1):8==e.communicateType?(u.a.get({url:"app/cash/register/system/getNumber",data:{params:{id:e.number}}}).then(function(a){if(a.msg)Object(i.a)({message:a.msg,position:"bottom",duration:2e3});else{t.CommunicateType=!1,console.log("所有数据",a);var s=(new Date).getTime();t.addChatNum(e.communicateType,e.toUser,a.orderNumber),$Hybrid.appToNative("makeChat",r()({id:a.orderNumber,title:"收银系统需求单",userId:a.providerUserId,nickName:a.providerUserName,salary:"",describe:a.describe,tagList:[],senderAvatar:"",senderName:"",timestamp:s,jobCity:"",isinvite:!1,url:"/#/MyServerHome/ServerDetail",detaildata:e}))}}),!1):void 0)},GotoDetail:function(e){var t=this;2==e.communicateType?u.a.get({url:"app/attractinvestment/service_detail",data:{params:{number:e.number,type:e.communicateType}}}).then(function(a){a&&t.$router.push({name:"ServerDetail",params:{ServerHomeData:e}})}):3==e.communicateType?u.a.get({url:"app/store/info/get1",data:{params:{id:e.number}}}).then(function(a){a&&t.$router.push({name:"ListShopsDetail",params:{ServerHomeData:e}})}):4==e.communicateType&&u.a.get({url:"app/idle/number1",data:{params:{number:e.number}}}).then(function(a){a&&t.$router.push({name:"SecondhandShopDetail",params:{ServerHomeData:e}})})},GotoShopsDetail:function(e){if(0==e.certificationStatus)return!1;this.$router.push({name:"ShopsDetail",params:{ServerHomeData:e}})},GotoJoinDetail:function(e){this.$router.push({name:"JoinDetail",params:{ServerHomeData:e}})},GotoCommunicate:function(e){this.$router.push({name:"CommunicateList",params:{ServerHomeData:e}})},RemoveId:function(e){this.sheetVisible=!0,this.RemoveDataId=e},RemoveSure:function(){var e=this;return"商铺管理"==this.SwitchType?!this.RemoveShopsType&&(this.RemoveShopsType=!0,u.a.delete({url:"app/store/info/delete",data:{params:{id:this.RemoveDataId}}}).then(function(t){e.MyServerData.forEach(function(t,a){t.id==e.RemoveDataId&&e.MyServerData.splice(a,1)}),e.ResetData()}),!1):"招商管理"==this.SwitchType?!this.RemoveShopsType&&(this.RemoveShopsType=!0,u.a.delete({url:"app/attractinvestment/demand",data:{params:{number:this.RemoveDataId}}}).then(function(t){e.MyServerData.forEach(function(t,a){t.number==e.RemoveDataId&&e.MyServerData.splice(a,1)}),e.ResetData()}),!1):"闲置管理"==this.SwitchType?!this.RemoveShopsType&&(this.RemoveShopsType=!0,u.a.delete({url:"app/idle/id",data:{params:{id:this.RemoveDataId}}}).then(function(t){e.MyServerData.forEach(function(t,a){t.id==e.RemoveDataId&&e.MyServerData.splice(a,1)}),e.ResetData()}),!1):void 0},ResetData:function(){this.sheetVisible=!1,this.MyServerTotal-=1,this.MyServerData.length>=this.MyServerTotal?this.finished=!0:this.finished=!1,this.MyServerTotal>10&&this.MyServerTotal>this.MyServerData.length&&(this.loadMoreMessage="下拉加载更多"),this.MyServerData.length>=this.MyServerTotal&&(this.loadMoreMessage="已经全部加载完毕"),this.MyServerTotal<1&&(this.loadMoreMessage="暂无任何记录"),this.RemoveShopsType=!1,this.RemoveDataId=void 0},IdleEdit:function(e){this.$router.push({name:"ReleaseIdle",params:{IdleEditData:e.id}})},styleText:function(e){return 1==e?"局部改造":2==e?"清水装修":3==e?"拆旧装新":void 0}}}),h={render:function(){var e=this,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"MyServerHome"}},[s("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),s("order-tab",[s("div",{class:"服务列表"==t.SwitchType?"tab_active":"tab",on:{click:function(e){return t.SwitchCheck("服务列表")}}},[t._v("服务列表")]),t._v(" "),s("div",{class:"商铺管理"==t.SwitchType?"tab_active":"tab",on:{click:function(e){return t.SwitchCheck("商铺管理")}}},[t._v("商铺管理")]),t._v(" "),s("div",{class:"招商管理"==t.SwitchType?"tab_active":"tab",on:{click:function(e){return t.SwitchCheck("招商管理")}}},[t._v("招商管理")]),t._v(" "),s("div",{class:"闲置管理"==t.SwitchType?"tab_active":"tab",on:{click:function(e){return t.SwitchCheck("闲置管理")}}},[t._v("闲置管理")])]),t._v(" "),s("div",{staticClass:"container box"},[s("infinite-scroll",{attrs:{isDelayed:!0,loading:t.loading,finished:t.finished,data:t.MyServerData,text:t.loadMoreMessage},on:{refresh:t.onRefresh,loadMore:t.onLoadMore}},["服务列表"==t.SwitchType?s("div",{staticClass:"server-list"},t._l(t.MyServerData,function(e,a){return s("div",{key:a,staticClass:"list"},[s("div",{staticClass:"list-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.logo+"?x-oss-process=image/resize,w_150",expression:"value.logo+'?x-oss-process=image/resize,w_150'"}],attrs:{alt:""}}),t._v(" "),s("span",[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"list-right"},[s("div",{staticClass:"btn-white",on:{click:function(a){return t.GotoDetail(e)}}},[t._v(t._s(t.ServerListType(e.communicateType)))]),t._v(" "),s("div",{staticClass:"btn-blue",on:{click:function(a){return t.Communicate(e)}}},[t._v("沟通")])])])}),0):t._e(),t._v(" "),"商铺管理"==t.SwitchType?s("div",{staticClass:"shop-list"},[s("div",{staticClass:"contentBox"},t._l(t.MyServerData,function(e,i){return s("div",{key:i,staticClass:"caseItem",on:{click:function(a){return t.GotoShopsDetail(e)}}},[s("div",{staticClass:"imgBox"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.headPhoto+"?x-oss-process=image/resize,w_700",expression:"value.headPhoto+'?x-oss-process=image/resize,w_700'"}],staticClass:"imgtitle",attrs:{alt:""}})]),t._v(" "),s("div",{staticClass:"detialBox"},[s("p",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"type"},[s("span",{staticClass:"typeVal"},[t._v(t._s(e.location))])]),t._v(" "),s("p",{staticClass:"time"},[t._v("\n                                    发布时间"),s("span",{staticClass:"timeVal"},[t._v(t._s(e.updateTime))])]),t._v(" "),0!=e.certificationStatus?s("img",{staticClass:"deleteIcon",attrs:{src:a("ylHr")},on:{click:function(a){return a.stopPropagation(),t.RemoveId(e.id)}}}):t._e(),t._v(" "),0==e.certificationStatus?s("img",{staticClass:"status",attrs:{src:a("bV2m"),alt:""}}):t._e(),t._v(" "),1==e.certificationStatus?s("img",{staticClass:"status",attrs:{src:a("eu1u"),alt:""}}):t._e(),t._v(" "),2==e.certificationStatus?s("img",{staticClass:"status",attrs:{src:a("YOia"),alt:""}}):t._e()])])}),0)]):t._e(),t._v(" "),"招商管理"==t.SwitchType?s("div",{staticClass:"zs-list"},t._l(t.MyServerData,function(e,i){return s("div",{key:i,staticClass:"list",on:{click:function(a){return t.GotoJoinDetail(e)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.doorPhotoUrl+"?x-oss-process=image/resize,w_700",expression:"value.doorPhotoUrl+'?x-oss-process=image/resize,w_700'"}],staticClass:"logo",attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"list-right"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.logo+"?x-oss-process=image/resize,w_150",expression:"value.logo+'?x-oss-process=image/resize,w_150'"}],attrs:{alt:""}}),t._v(" "),s("span",{staticClass:"zs-name"},[t._v(t._s(e.projectName))])]),t._v(" "),s("div",{staticClass:"title-right"},[s("p",{staticClass:"pirce"},[t._v(t._s(e.cost)+"万")]),t._v(" "),s("img",{staticClass:"remove-icon",attrs:{src:a("ylHr"),alt:""},on:{click:function(a){return a.stopPropagation(),t.RemoveId(e.number)}}})])]),t._v(" "),s("div",{staticClass:"desc"},[t._v(t._s(e.describe))]),t._v(" "),s("div",{staticClass:"text-btn-box"},t._l(e.labelList,function(e,a){return s("div",{key:a,staticClass:"text-btn"},[t._v(t._s(e))])}),0)])])}),0):t._e(),t._v(" "),"闲置管理"==t.SwitchType?s("div",{staticClass:"xz-list zs-list"},t._l(t.MyServerData,function(e,i){return s("div",{key:i,staticClass:"list"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.fileVO.url+"?x-oss-process=image/resize,w_150",expression:"value.fileVO.url+'?x-oss-process=image/resize,w_150'"}],staticClass:"logo",attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"list-right"},[s("div",{staticClass:"title"},[s("div",{staticClass:"title-left margin-top"},[s("span",[t._v(t._s(e.title))])]),t._v(" "),s("img",{staticClass:"remove-icon",attrs:{src:a("ylHr"),alt:""},on:{click:function(a){return a.stopPropagation(),t.RemoveId(e.id)}}}),t._v(" "),s("div",{staticClass:"xz-btn",on:{click:function(a){return t.IdleEdit(e)}}},[t._v("编辑")])]),t._v(" "),e.communicationNumber>0?s("div",{staticClass:"desc",on:{click:function(a){return t.GotoCommunicate(e)}}},[s("img",{staticClass:"go-icon",attrs:{src:a("LfT8"),alt:""}}),t._v("\n                                "+t._s(e.communicationNumber)+"人沟通\n                            ")]):t._e()])])}),0):t._e()])],1),t._v(" "),s("PopupSure",{attrs:{Data:{sheetVisible:this.sheetVisible,message:"确认删除该资源信息？",sureText:"确定",surePop:this.RemoveSure,removePop:function(){e.sheetVisible=!1}}}})],1)},staticRenderFns:[]};var g=a("VU/8")(p,h,!1,function(e){a("tcib")},"data-v-4072e4e4",null);t.default=g.exports},eu1u:function(e,t,a){e.exports=a.p+"static/img/success .480d9ab.png"},tcib:function(e,t){},ylHr:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABwElEQVRYR+2Wz0rDQBDGZ3ZTfQH/QUHFi48gFFFfQbAFfQFBEGsbBR9BjbZ6EXyAFqngM1hs38CDF1HBgyJ6rk12ZSORkDZmZyn0khzD7ny/+WZndxCG/OGQ9SEFSB2IdWDVPp4YdVkeJb+unxXfTA7r+k51UqK3xjrftdrFwVe/GLEAhaKzzwAOAeARpZWjQuR3T7NciiYAzEmAzauqfUkCyG8dTfER1lIBFISHbKlRKb3qOKHEmfDaiDjtJ8BhoX5if5AA1OJfC922n4WUL4LxXBJEj3iCe4ldQIEIi0spHxhklpNKlwig60SPuIWLcbaHS6EFEEAI6N4i4ny0HBtlZ8ZzZVPV3M9cU1zF1QbwIcrOmHDlXRgiw4TledBCgCxVnAwQhQCAJwmQMRU3AugDoX7dI4cVnZpHW5FUgmBzuBTqn4n1QSwyQET8WekDwKwpBAmg3yFUmQS3ngmENoC6kOLa0PQO0D6EOrehKUSiAzriwYEygfgXICyu+yJS34NYgOhzTJkJBvIcD2Ig+esOo4Fk+3yc826hY4nGjbP3rjOIRNcEI5mHWG9USp/kgcRElLonsQuoAanrU4DUgR8qKmowm9ekxgAAAABJRU5ErkJggg=="}});
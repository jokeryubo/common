webpackJsonp([54],{U4pg:function(t,a){},xhUU:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("NYxO");var i=e("d4/4"),s=e("B1Az"),o=e("cKc3"),n=e("Au9i"),l=e("HhFT"),r=e.n(l),c=e("opVj"),p=e.n(c),d=e("oAxq"),u=e.n(d),g=e("SEBm"),v=e.n(g),h=e("fLRn"),m=e.n(h),_={name:"Bill",data:function(){return{topbar:{isShow:!0,title:"账单"},showModel:!1,transactionType:"交易类型",type:"-1",nodata:!1,listdata:[],income:"0",expenditure:"0",logoUrl:[r.a,p.a,u.a,v.a,m.a],loading:!1,pageNum:1,loadingType:!1,loadingMessage:"",loadingMessageType:!1,loadMoreCallBackType:!1,ToTal:""}},created:function(){this.GetData(this.type,this.pageNum,""),this.loadMoreCallBack()},activated:function(){this.$nextTick(function(){var t=window.sessionStorage.getItem("scrollPosition");setTimeout(function(){window.scrollTo(0,t)},300)})},components:{BaseTopbar:i.a,Cell:s.a,Popup:n.Popup},methods:{typeLogoUrl:function(t){switch(t){case 1:return this.logoUrl[0];case 2:return this.logoUrl[2];case 3:return this.logoUrl[1];case 4:return this.logoUrl[3];case 5:return this.logoUrl[4]}},handleClick:function(){this.showModel=!0},choosetype:function(t,a){this.showModel=!1,this.type=t,this.transactionType=a,this.pageNum=1,this.GetData(this.type,this.pageNum,"")},godetial:function(t,a,e,i){var s=document.documentElement.scrollTop;window.sessionStorage.setItem("scrollPosition",s),3==i?this.$router.push({name:"OtherBills",query:{number:t,type:a,originalOrderFlag:e}}):this.$router.push({name:"BillDetial",query:{number:t,type:a,originalOrderFlag:e}})},GetData:function(t,a,e){var i=this;this.loadingType=!0,this.loadingMessageType=!1,this.loadMoreCallBackType=!1,o.a.get({url:"order/bill/get",data:{params:{type:t,pageNum:a}}}).then(function(t){0==t.billSimpleInfoVOS.total?i.nodata=!0:i.nodata=!1,i.ToTal=t.billSimpleInfoVOS.total,i.loadingType=!1,i.loadingMessageType=!0,i.loadMoreCallBackType=!0;try{if(i.listdata.length>1&&"pageadd"==e){var a=i.listdata;return t.billSimpleInfoVOS.list.forEach(function(t){a.push(t)}),i.listdata=a,i.pageNum+=1,!1}}catch(t){}t.billSimpleInfoVOS.list.length<1&&(i.loadingMessage="暂无账单信息"),t.billSimpleInfoVOS.total>10&&(i.loadingMessage="下拉加载更多"),t.billSimpleInfoVOS.total<10&&t.billSimpleInfoVOS.total>0&&(i.loadingMessage="已经全部加载完毕"),i.listdata=t.billSimpleInfoVOS.list,i.income=t.income,i.expenditure=t.expenditure,i.pageNum+=1})},loadMoreCallBack:function(){console.log("触发无限加载");try{var t=this.listdata.length;if(!(t>9))return!1;if(!(1*this.ToTal>1*t))return this.loadingMessageType=!0,this.loadingMessage="已经全部加载完毕",!1;if(this.loading=!0,this.loadingType=!0,this.loadingMessageType=!1,!this.loadMoreCallBackType)return!1;this.loadMoreCallBackType=!1,this.GetData(this.type,this.pageNum,"pageadd")}catch(t){}},disabledloadMoreCallBack:function(){return!1}}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bill"},[e("BaseTopbar",{staticClass:"topbar",attrs:{topbar:t.topbar}},[e("div",{staticClass:"topbar-btn",on:{click:function(a){return t.handleClick()}}},[e("div",{staticClass:"buttonBox"},[e("span",[t._v(t._s(t.transactionType))]),t._v(" "),e("div",{staticClass:"triangle"})])])]),t._v(" "),t.showModel?e("div",{staticClass:"list"},[e("div",{staticClass:"ulbox"},[e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype(-1,"全部")}}},[t._v("全部")]),t._v(" "),e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype("1","办证服务")}}},[t._v("办证服务")]),t._v(" "),e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype(2,"拼团服务")}}},[t._v("拼团服务")]),t._v(" "),e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype(3,"打包服务")}}},[t._v("打包服务")]),t._v(" "),e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype(4,"税务代办")}}},[t._v("税务代办")]),t._v(" "),e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype(5,"透明厨房")}}},[t._v("透明厨房")]),t._v(" "),e("p",{on:{click:function(a){return a.stopPropagation(),t.choosetype("-2","退款记录")}}},[t._v("退款记录")]),t._v(" "),e("div",{staticClass:"triangle"})])]):t._e(),t._v(" "),t.nodata?t._e():e("p",{staticClass:"billInfo"},[e("span",{staticClass:"out"},[t._v("\n            收入:"),e("span",{staticClass:"outnum"},[t._v(t._s(t.income))]),t._v("元\n        ")]),t._v(" "),e("span",{staticClass:"in"},[t._v("\n            支出:"),e("span",{staticClass:"innum"},[t._v(t._s(t.expenditure))]),t._v("元\n        ")])]),t._v(" "),t.nodata?t._e():e("div",{staticClass:"billList"},[e("mt-tab-container",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMoreCallBack,expression:"loadMoreCallBack"}],attrs:{"infinite-scroll-listen-for-event":t.disabledloadMoreCallBack,"infinite-scroll-disabled":t.loading,"infinite-scroll-distance":"10"}},[e("mt-tab-container-item",[t._l(t.listdata,function(a,i){return e("div",{key:i,staticClass:"cell",on:{click:function(e){return t.godetial(a.number,a.type,a.originalOrderFlag,a.billType)}}},[e("Cell",{attrs:{title:a.typeName,desc:a.date,isShow:"false",borderStyle:"true"}},[e("img",{attrs:{slot:"img",src:t.typeLogoUrl(a.type)},slot:"img"}),t._v(" "),e("div",{staticClass:"cellMsg"},[12==a.payStatus?e("span",{class:a.isIncome?"add":"reduce"},[t._v(t._s(a.isIncome?"+":"-")+t._s(a.refundAmount))]):e("span",{class:a.isIncome?"add":"reduce"},[t._v(t._s(a.isIncome?"+":"-")+t._s(a.payAmount))]),t._v(" "),a.originalOrderFlag?e("span",{staticClass:"msg"},[t._v("已退款(￥"+t._s(a.refundAmount)+")")]):t._e(),t._v(" "),11==a.payStatus?e("span",{staticClass:"msg"},[t._v("正在退款中")]):t._e()])])],1)}),t._v(" "),t.nodata?e("div",{staticClass:"nodata"},[t._v("\n                    暂无任何记录\n                ")]):t._e(),t._v(" "),e("div",{staticClass:"loading-box"},[e("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:t.loadingType,expression:"loadingType"}],attrs:{type:"fading-circle",color:"#54c2a7"}}),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:t.loadingMessageType,expression:"loadingMessageType"}]},[t._v(t._s(t.loadingMessage))])],1)],2)],1)],1),t._v(" "),t.nodata?e("div",{staticClass:"nodata"},[t._v("\n        暂无任何记录\n    ")]):t._e(),t._v(" "),t.showModel?e("div",{staticClass:"model",on:{click:function(a){t.showModel=!1}}}):t._e()],1)},staticRenderFns:[]};var y=e("VU/8")(_,f,!1,function(t){e("U4pg")},"data-v-cb252f7c",null);a.default=y.exports}});
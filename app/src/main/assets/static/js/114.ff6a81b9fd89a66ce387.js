webpackJsonp([114],{"/2DR":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Gu7T"),i=e.n(s),o=e("tmUd"),n=e("cKc3"),l=e("oFuF"),r={name:"AdvertHome",data:function(){return{listParams:{},lon:104.069498,lat:30.552376,city:"成都市",tags:null,keyword:"",total:0,pageSize:20,pageNum:1,nocitydatatag:!1,loadMoreMessage:"已经全部加载完毕",loadMoreMessage2:"抱歉,当前城市的服务正在开通中，您可以试试其他城市~~",AdvertData:[],isLoading:!1,loading:!1,finished:!1,options:[{text:"筛选",value:""},{text:"logo设计",value:1},{text:"VI设计",value:2},{text:"宣传品设计",value:3},{text:"包装设计",value:4},{text:"广告设计",value:5}]}},components:{InfiniteScroll:e("VaMN").a,BaseTopSearch:o.a},created:function(){console.log("广告设计定位信息",this.$eventHub._data.$location),this.lon=this.$eventHub._data.$location.lon,this.lat=this.$eventHub._data.$location.lat,this.city=this.$eventHub._data.$location.cityName,this.listParams={companyName:this.keyword,designType:this.tags,longitude:this.lon,latitude:this.lat,cityName:this.city},this.GetData()},mounted:function(){},updated:function(){},methods:{onSearch:function(t){this.keyword=t,this.pageNum=1,this.loading=!1,this.AdvertData=[],this.GetData()},handleChange:function(t){console.log("页面接受组件值",t),this.tags=t,this.pageNum=1,this.loading=!1,this.AdvertData=[],this.GetData()},goBack:function(){$Hybrid.appToNative("close")},handClick:function(t,a){if("GotoDetail"==t){if(!a.isTrue)return!1;var e="";return 1==a.serviceType?(e="AdvertOssList",this.$router.push({name:e,params:{AdvertDetailData:a}})):(e="AppSservicesList",this.$router.push({name:e,query:{shopId:a.shopId,type:"3"}})),!1}},onRefresh:function(){this.pageNum=1,this.finished=!0,this.GetData("refresh")},onLoadMore:function(){this.loading=!0,this.GetData()},GetData:function(t){var a=this;n.a.post({url:"app/advertisement/shoplist",data:{params:{companyName:this.keyword,designType:this.tags,longitude:this.lon,latitude:this.lat,cityName:this.city,pageNum:this.pageNum,pageSize:this.pageSize}}}).then(function(e){a.loading=!1,a.total=e.data.totalNum,a.AdvertData="refresh"!==t?[].concat(i()(a.AdvertData),i()(e.data.list)):[].concat(i()(e.data.list)),console.log("AdvertData-----\x3e",a.AdvertData),a.AdvertData.length>=a.total?a.finished=!0:(a.pageNum+=1,a.finished=!1),0==a.total?a.loadMoreMessage="没有更多数据":a.loadMoreMessage="已经全部加载完毕",a.keyword||0!=a.total||1!=a.pageNum||a.tags||(a.nocitydatatag=!0)},function(t){console.log("error ===>",t)}).catch(function(t){console.log("e =====>",t)})},ellipsisText:function(t,a){return l.a.ellipsisText(t,a)}}},d={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"AdvertHome"}},[s("base-top-search",{attrs:{option:t.options},on:{search:t.onSearch,change:t.handleChange}}),t._v(" "),s("div",{staticClass:"container"},[s("infinite-scroll",{attrs:{isDelayed:!0,loading:t.loading,finished:t.finished,data:t.AdvertData,text:t.nocitydatatag?t.loadMoreMessage2:t.loadMoreMessage},on:{refresh:t.onRefresh,loadMore:t.onLoadMore}},t._l(t.AdvertData,function(a,i){return s("div",{key:i,staticClass:"list",on:{click:function(e){return t.handClick("GotoDetail",a)}}},[s("div",{staticClass:"flex"},[s("div",{staticClass:"list-content"},[s("div",{staticClass:"text-box"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.logo+"?x-oss-process=image/resize,w_150",expression:"value.logo+'?x-oss-process=image/resize,w_150'"}],staticClass:"img-head"}),t._v(" "),s("span",[t._v(t._s(a.shopName))]),t._v(" "),a.isVip?s("img",{attrs:{src:e("RSf1")}}):t._e()]),t._v(" "),s("div",{staticClass:"distance"},[t._v(t._s(a.distance+"km"))])]),t._v(" "),s("div",{staticClass:"margin-top"},t._l(a.labelList,function(a,e){return s("span",{key:e,staticClass:"desc"},[t._v(t._s(a))])}),0)])])}),0)],1)],1)},staticRenderFns:[]};var c=e("VU/8")(r,d,!1,function(t){e("9ffc")},"data-v-0d3b5ddf",null);a.default=c.exports},"9ffc":function(t,a){}});
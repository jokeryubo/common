webpackJsonp([39],{"0cK6":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABgElEQVRoQ+2XTUrEQBCFKz/unJXgXQQvMOdoQq/HzegJdDa6bkKfwwsI3kVwpTvzIw0JyEC6k9QrJFCznqr5vvd6Mj0ZbfyVbZyfVOC/G9QGtAFmAnqEmAGyx7UBdoTMBaINeO93gc8Y88XknBwXE3DOHYjoNHzy0Vr7IiEhIuCcuyeixzPgB2vtE1oCLjABP3LDJaACCXgRCZjABPz3QH0pdZwgAhH4/QD+SkQiEmyBGLy19i0IOOduiUhEgiUwB348OlISqwWWwEtKrBJYAy8lsViAAy8hsUgAAY+WmC2AhEdKzBKQgEdJJAWGW+Xz2S9p+IXdj8957gUt8oi9S91iowLhPt80zScRXfyBhMInmvgpy/Iq9n9iqYAIfESCJxAW13Vtuq47ZVn2URSFMca8c49MbN57f9O2re/7/jrP82NVVT72/uR3QBIWsVsFEClydmgDnPQQs9oAIkXODm2Akx5iVhtApMjZoQ1w0kPMagOIFDk7tAFOeojZzTfwC1FyujF5K0B+AAAAAElFTkSuQmCC"},"X/PG":function(a,t){},iZgl:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("mvHQ"),i=e.n(s),r=(e("NYxO"),e("d4/4")),c=e("nRsL"),l=e("9MSF"),n=e("KgB8"),o=e("lTvI"),d=e("Wl27"),v=e("Au9i"),m=e("cKc3"),g={name:"DetailPack",data:function(){return{topbar:{isShow:!0,title:"订单详情",callBack:this.goBack},selected:"1",OrderData:"",sheetVisible:!1,SheetVisibleText:"",RemoveOrderType:"",payments:this.paymentCallBack,agreementType:!1,ShowHtmlType:"",DetailData:{},PackListData:[],toggleImgType:!1,payType:"",payBack:"",payIsClick:!0,ClickRemoveOrder:!0,ClickCancelOrder:!0}},created:function(){},mounted:function(){this.OrderData=this.$route.params.data||JSON.parse(window.sessionStorage.getItem("OrderPack")),sessionStorage.getItem("agreementType")&&(this.agreementType=JSON.parse(sessionStorage.getItem("agreementType")).agreementType),window.sessionStorage.setItem("OrderPack",i()(this.OrderData)),this.ShowHtml()},components:{BaseTopbar:r.a,Toast:v.Toast,OrderList:c.a,AddressInfo:l.a,Payment:d.a,Countdown:n.a,PopupSure:o.a},methods:{goBack:function(){return sessionStorage.removeItem("agreementType"),!0},CountDownCallBack:function(){this.$router.go(-1)},RemoveOrder:function(){var a=this;if("删除订单"==this.RemoveOrderType){if(0==this.ClickRemoveOrder)return!1;this.ClickRemoveOrder=!1,m.a.delete({url:"order/packet/delete",data:{params:{orderId:this.DetailData.id}}}).then(function(t){var e=a;setTimeout(function(){e.ClickRemoveOrder=!0,e.$router.go(-1)},500),console.log("删除结果",t)})}if("取消订单"==this.RemoveOrderType){if(0==this.ClickCancelOrder)return!1;this.ClickCancelOrder=!1,m.a.get({url:"order/packet/cancel",data:{params:{orderId:this.DetailData.id}}}).then(function(t){var e=a;setTimeout(function(){e.ClickCancelOrder=!0,e.$router.go(-1)},500),console.log("取消结果",t)})}},HandleClick:function(a){var t=this;if(this.RemoveOrderType=a,console.log(a),"重填资料"==a&&this.$router.push({name:"AccreditationRequirementSub",params:{data:this.DetailData}}),console.log(0x3f28cb71571c7,a),"删除订单"==a&&(this.SheetVisibleText="您确定删除订单吗",this.sheetVisible=!0),"待付款"==a){if(0==this.agreementType)return Object(v.Toast)({message:"请勾选《打包拼团服务协议》",position:"bottom",duration:2e3}),!1;if(3==this.payType){if(0==this.payIsClick)return!1;this.payIsClick=!1,m.a.post({url:"order/payment/start/payment",data:{params:{payType:this.payType-1,orderNumber:this.DetailData.tailMoneyOrderNumber,amount:this.DetailData.tailPayMoney,bankCardNo:this.payBack.cardNo}}}).then(function(a){t.payIsClick=!0,t.$router.push({name:"BackPay",params:{BackPayData:a,Url:"OrderPack"}})})}}"取消订单"==a&&(this.SheetVisibleText="您确定取消订单吗",this.sheetVisible=!0)},decorationMethodType:function(a){return 1==a?"局部改造":2==a?"清水整装":3==a?"拆旧装新":void 0},stateType:function(a){return 1==a?"待付款":2==a?"待拟合同":3==a?"待签合同":4==a?"进行中":5==a?"已取消":6==a?"已完成":void 0},toggleList:function(a,t){this.PackListData[a].toggleType=!t,console.log(t,111)},ShowHtml:function(){console.log(9999,this.OrderData),this.ShowHtmlType=this.OrderData.status,this.GetData(this.OrderData.id)},GetData:function(a){var t=this;m.a.get({url:"order/packet/get",data:{params:{orderId:a}}}).then(function(a){t.DetailData=a,console.log("订单详情",a),t.PackListData=t.PackListDataFnbeL(t.DetailData.packetDetailDOS),console.log(33333,t.PackListData)})},GoChat:function(a){$Hybrid.appToNative("makeChat",i()({id:"",title:"",userId:a.providerUserId,nickName:a.nickName,salary:"",describe:"",tagList:[],senderAvatar:"",senderName:"",timestamp:0,jobCity:"",isinvite:!1}))},PackListDataFnbeL:function(a){console.log("PackListDataFnbeL",a);var t=[];return a.forEach(function(a){try{t.push({desc:a.packageDetailDTO.name,name:a.packageDetailDTO.packageDTOS[0].packageName,price:"￥"+a.packageDetailDTO.packageDTOS[0].price,discountPrice:"￥"+a.packageDetailDTO.packageDTOS[0].discountPrice,toggleType:!0,logo:a.logo,shopname:a.shopName,detailStatus:a.detailStatus,avatar:a.avatar,nickName:a.nickName,providerUserId:a.providerUserId,providerId:a.providerId})}catch(e){t.push({desc:a.packageDetailDTO.name,name:a.packageDetailDTO.packageName,price:"￥"+a.packageDetailDTO.price,discountPrice:"￥"+a.packageDetailDTO.discountPrice,toggleType:!0,logo:a.logo,shopname:a.shopName,detailStatus:a.detailStatus,avatar:a.avatar,nickName:a.nickName,providerUserId:a.providerUserId,providerId:a.providerId})}}),t},agreement:function(){this.agreementType=!this.agreementType},changeshow:function(){sessionStorage.setItem("agreementType",i()({agreementType:this.agreementType})),this.$router.push({name:"Agreement",query:"打包拼团"})},paymentCallBack:function(a,t){this.payType=a,this.payBack=3==a?t:"",console.log("支付方式: ",a,t)},ListData:function(a){var t=[];try{t.push({name:a.licenseProcessingDTO.name,message:a.licenseProcessingDTO.packageDTOS[0].packageName,price:"￥"+a.licenseProcessingDTO.packageDTOS[0].discountPrice})}catch(a){}try{t.push({name:a.cashRegisterSystemDTO.name,message:a.cashRegisterSystemDTO.packageDTOS[0].packageName,price:"￥"+a.cashRegisterSystemDTO.packageDTOS[0].discountPrice})}catch(a){}try{t.push({name:a.taxPendingDTO.name,message:a.taxPendingDTO.packageDTOS[0].packageName,price:"￥"+a.taxPendingDTO.packageDTOS[0].discountPrice})}catch(a){}try{t.push({name:a.fengShuiConsultingDTO.name,message:a.fengShuiConsultingDTO.packageDTOS[0].packageName,price:"￥"+a.fengShuiConsultingDTO.packageDTOS[0].discountPrice})}catch(a){}try{t.push({name:a.advertisingDesignDTO.name,message:a.advertisingDesignDTO.packageDTOS[0].packageName,price:"￥"+a.advertisingDesignDTO.packageDTOS[0].discountPrice})}catch(a){}try{t.push({name:a.promotionDTO.name,message:a.promotionDTO.packageDTOS[0].packageName,price:"￥"+a.promotionDTO.packageDTOS[0].discountPrice})}catch(a){}try{t.push({name:a.shopLeasingDTO.name,message:a.shopLeasingDTO.packageDTOS[0].packageName,price:"￥"+a.shopLeasingDTO.packageDTOS[0].discountPrice})}catch(a){}return t},beLuxuriousData:function(a){console.log("奢华定制");var t=[];try{t.push({name:"奢华定制",message:a.luxuryRuleDTO.name,price:"￥"+a.tailPayMoney})}catch(a){}return a.luxuryRuleDTO.rule.forEach(function(a){t.push({name:a.projectName,message:a.packageName,price:"￥"+a.discountPrice})}),t},detailStatus:function(a){return console.log(66666666,a),1==a?"进行中":2==a?"已完成":3==a?"已取消":void 0}}},p={render:function(){var a=this,t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"DetailPack"}},[i("BaseTopbar",{attrs:{topbar:t.topbar}}),t._v(" "),"1"==t.ShowHtmlType?i("div",{staticClass:"dfdj"},[i("div",{staticClass:"bg-head even"},[i("p",[t._v("您已下单，请及时完成支付")]),t._v(" "),i("div",{staticClass:"dfk-AddressInfo"},[i("AddressInfo",{attrs:{name:t.DetailData.userName,tel:t.DetailData.tel,address:t.DetailData.address}})],1)]),t._v(" "),i("div",{staticClass:"margin margin-top even-top"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"item-title"},[t._m(0),t._v(" "),i("div",{staticClass:"message red"},[t._v(t._s(t.stateType(t.DetailData.status)))])]),t._v(" "),i("OrderList",{attrs:{datas:1==t.DetailData.beLuxurious?t.beLuxuriousData(t.DetailData):t.ListData(t.DetailData)}})],1),t._v(" "),i("div",{staticClass:"item-footer"},[i("div",{staticClass:"footer-list btn"},[i("div",{staticClass:"btn-content"},[i("span",[t._v("支付金额  ")]),t._v(" "),i("span",{staticClass:"money"},[t._v("￥"+t._s(t.DetailData.tailPayMoney))])])])])]),t._v(" "),i("div",{staticClass:"margin"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"detail-box"},[i("div",{staticClass:"detail-list"},[t._v("订单编号  "+t._s(t.DetailData.tailMoneyOrderNumber))]),t._v(" "),i("div",{staticClass:"detail-list"},[t._v("下单时间  "+t._s(t.DetailData.createTime))])])])]),t._v(" "),i("div",{staticClass:"footer-btn"},[i("div",{staticClass:"words"},[i("span",{staticStyle:{color:"#000"}},[t._v("总计")]),t._v("   ￥"+t._s(t.DetailData.tailPayMoney))]),t._v(" "),i("div",{staticClass:"btn-remove",on:{click:function(a){return t.HandleClick("取消订单")}}},[t._v("取消订单")])])]):t._e(),t._v(" "),"5"==t.ShowHtmlType?i("div",{staticClass:"qx"},[i("AddressInfo",{attrs:{name:t.DetailData.userName,tel:t.DetailData.tel,address:t.DetailData.address}}),t._v(" "),i("div",{staticClass:"margin margin-top-20"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"item-title"},[t._m(1),t._v(" "),i("div",{staticClass:"message gray"},[t._v(t._s(t.stateType(t.DetailData.status)))])]),t._v(" "),i("OrderList",{attrs:{datas:1==t.DetailData.beLuxurious?t.beLuxuriousData(t.DetailData):t.ListData(t.DetailData)}})],1),t._v(" "),i("div",{staticClass:"item-footer"},[i("div",{staticClass:"footer-list btn"},[i("div",{staticClass:"btn-content"},[i("span",[t._v("服务总价  ")]),t._v(" "),i("span",{staticClass:"money"},[t._v("￥"+t._s(t.DetailData.tailPayMoney))])])])])]),t._v(" "),i("div",{staticClass:"margin"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"detail-box"},[i("div",{staticClass:"detail-list"},[t._v("订单编号  "+t._s(t.DetailData.tailMoneyOrderNumber))]),t._v(" "),i("div",{staticClass:"detail-list"},[t._v("下单时间  "+t._s(t.DetailData.createTime))])])])]),t._v(" "),t.DetailData.serviceHead?i("div",{staticClass:"margin detail-box"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"head"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.DetailData.serviceHead,expression:"DetailData.serviceHead"}],staticClass:"head-img",attrs:{alt:""}}),t._v(" "),i("div",{staticClass:"head-connet"},[i("p",[t._v(t._s(t.DetailData.serviceNickName))]),t._v(" "),i("p",[t._v(t._s(t.DetailData.serviceCompanyName))])]),t._v(" "),t._m(2)])])]):t._e(),t._v(" "),i("div",{staticClass:"footer-btn"},[i("div",{staticClass:"words"},[i("span",{staticStyle:{color:"#000"}},[t._v("总计")]),t._v("   ￥"+t._s(t.DetailData.tailPayMoney))]),t._v(" "),i("div",{staticClass:"btn",on:{click:function(a){return t.HandleClick("删除订单")}}},[t._v("删除订单")])])],1):t._e(),t._v(" "),"4"==t.ShowHtmlType?i("div",{staticClass:"jxz"},[i("div",{staticClass:"bg-head ok-buttom"},[i("p",[t._v("  进行中的订单")]),t._v(" "),i("div",{staticClass:"dfk-AddressInfo"},[i("AddressInfo",{attrs:{name:t.DetailData.userName,tel:t.DetailData.tel,address:t.DetailData.address}})],1)]),t._v(" "),t._l(t.PackListData,function(a,s){return i("div",{key:s,staticClass:"margin"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"item-title"},[i("div",[i("span",{staticClass:"icon"}),t._v(" 需求单"+t._s(s+1))]),t._v(" "),i("div",{staticClass:"message gray",on:{click:function(e){return t.toggleList(s,a.toggleType)}}},[i("span",{class:1==a.detailStatus?"red":""},[t._v(t._s(t.detailStatus(a.detailStatus)))]),t._v(" "),a.toggleType?i("img",{staticClass:"toggleImg",attrs:{src:e("50NC"),alt:""}}):t._e(),t._v(" "),a.toggleType?t._e():i("img",{staticClass:"toggleImg",attrs:{src:e("0cK6"),alt:""}})])]),t._v(" "),i("div",{staticClass:"Pack-list toggleClass1",class:a.toggleType?"":"toggleClass"},[i("div",{staticClass:"Pack-desc"},[t._v("\n                        "+t._s(a.desc)+"\n                    ")]),t._v(" "),i("div",{staticClass:"Pack-title"},[i("span",[t._v(t._s(a.name))]),t._v(" "),i("span",[t._v(t._s(a.discountPrice))])]),t._v(" "),"证照办理"!==a.desc&&a.providerId?i("div",{staticClass:"Pack-footer"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.logo,expression:"value.logo"}],attrs:{alt:""}}),t._v(" "),i("span",[t._v(t._s(a.shopname))])]):t._e(),t._v(" "),"证照办理"!==a.desc&&a.providerId?i("div",{staticClass:"head"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.avatar,expression:"value.avatar"}],staticClass:"head-img",attrs:{alt:""}}),t._v(" "),i("div",{staticClass:"head-connet"},[i("p",[t._v("快小二")]),t._v(" "),i("p",[t._v(t._s(a.nickName))])]),t._v(" "),i("div",{staticClass:"icon-img",on:{click:function(e){return t.GoChat(a)}}},[i("img",{attrs:{src:e("LfT8"),alt:""}})])]):t._e()])])])}),t._v(" "),i("div",{staticClass:"margin"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"detail-box"},[i("div",{staticClass:"detail-list"},[t._v("订单编号  "+t._s(t.DetailData.tailMoneyOrderNumber))]),t._v(" "),i("div",{staticClass:"detail-list"},[t._v("下单时间  "+t._s(t.DetailData.createTime))])])])]),t._v(" "),i("div",{staticClass:"footer-btn"},[i("div",{staticClass:"words"},[i("span",{staticStyle:{color:"#000"}},[t._v("总计")]),t._v("   ￥"+t._s(t.DetailData.tailPayMoney))])])],2):t._e(),t._v(" "),"6"==t.ShowHtmlType?i("div",{staticClass:"wc"},[i("div",{staticClass:"bg-head ok-buttom"},[i("p",[t._v("  已完成的订单")]),t._v(" "),i("div",{staticClass:"dfk-AddressInfo"},[i("AddressInfo",{attrs:{name:t.DetailData.userName,tel:t.DetailData.tel,address:t.DetailData.address}})],1)]),t._v(" "),t._l(t.PackListData,function(a,s){return i("div",{key:s,staticClass:"margin"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"item-title"},[i("div",[i("span",{staticClass:"icon"}),t._v(" 需求单"+t._s(s+1))]),t._v(" "),i("div",{staticClass:"message gray",on:{click:function(e){return t.toggleList(s,a.toggleType)}}},[i("span",[t._v(t._s(t.stateType(t.DetailData.status)))]),t._v(" "),a.toggleType?i("img",{staticClass:"toggleImg",attrs:{src:e("50NC"),alt:""}}):t._e(),t._v(" "),a.toggleType?t._e():i("img",{staticClass:"toggleImg",attrs:{src:e("0cK6"),alt:""}})])]),t._v(" "),i("div",{staticClass:"Pack-list toggleClass1",class:a.toggleType?"":"toggleClass"},[i("div",{staticClass:"Pack-desc"},[t._v("\n                        "+t._s(a.desc)+"\n                    ")]),t._v(" "),i("div",{staticClass:"Pack-title"},[i("span",[t._v(t._s(a.name))]),t._v(" "),i("span",[t._v(t._s(a.discountPrice))])]),t._v(" "),"证照办理"!==a.desc&&a.providerId?i("div",{staticClass:"Pack-footer"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.logo,expression:"value.logo"}],attrs:{alt:""}}),t._v(" "),i("span",[t._v(t._s(a.shopname))])]):t._e(),t._v(" "),"证照办理"!==a.desc&&a.providerId?i("div",{staticClass:"head"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.avatar,expression:"value.avatar"}],staticClass:"head-img",attrs:{alt:""}}),t._v(" "),i("div",{staticClass:"head-connet"},[i("p",[t._v("快小二")]),t._v(" "),i("p",[t._v(t._s(a.nickName))])]),t._v(" "),i("div",{staticClass:"icon-img",on:{click:function(e){return t.GoChat(a)}}},[i("img",{attrs:{src:e("LfT8"),alt:""}})])]):t._e()])])])}),t._v(" "),i("div",{staticClass:"margin"},[i("div",{staticClass:"item-box"},[i("div",{staticClass:"detail-box"},[i("div",{staticClass:"detail-list"},[t._v("订单编号  "+t._s(t.DetailData.tailMoneyOrderNumber))]),t._v(" "),i("div",{staticClass:"detail-list"},[t._v("下单时间  "+t._s(t.DetailData.createTime))])])])]),t._v(" "),i("div",{staticClass:"footer-btn"},[i("div",{staticClass:"words"},[i("span",{staticStyle:{color:"#000"}},[t._v("总计")]),t._v("   ￥"+t._s(t.DetailData.tailPayMoney))]),t._v(" "),i("div",{staticClass:"btn",on:{click:function(a){return t.HandleClick("删除订单")}}},[t._v("删除订单")])])],2):t._e(),t._v(" "),i("PopupSure",{attrs:{Data:{sheetVisible:t.sheetVisible,message:t.SheetVisibleText,sureText:"确定",surePop:this.RemoveOrder,removePop:function(){a.sheetVisible=!1}}}})],1)},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("div",[t("span",{staticClass:"icon"}),this._v(" 需求单")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",[t("span",{staticClass:"icon"}),this._v(" 需求单")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"icon-img"},[t("img",{attrs:{src:e("LfT8"),alt:""}})])}]};var u=e("VU/8")(g,p,!1,function(a){e("X/PG")},"data-v-51648753",null);t.default=u.exports}});
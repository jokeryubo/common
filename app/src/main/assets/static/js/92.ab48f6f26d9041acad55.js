webpackJsonp([92],{U6ni:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("mvHQ"),s=t.n(i),l=t("d4/4"),n=t("B1Az"),o=t("cKc3"),r=(t("oFuF"),t("Au9i")),d=(t("NYxO"),{data:function(){return{topbar:{isShow:!0,title:"闲置沟通列表"},ServerHomeData:{},DetailData:{},disabledloadMore:this.disabledloadMoreCallBack,loadMore:this.loadMoreCallBack,loading:!1,loadingMessage:"",loadingType:!1,loadingMessageType:!1,loadMoreCallBackType:!1}},components:{BaseTopbar:l.a,Cell:n.a,Toast:r.Toast},created:function(){},mounted:function(){this.ServerHomeData=this.$route.params.ServerHomeData,this.GetData(1)},methods:{GetData:function(a,e){var t=this;o.a.get({url:"app/idle/communicate",data:{params:{number:this.ServerHomeData.number,pageNum:a,pageSize:10}}}).then(function(a){t.loadingType=!1,t.loadingMessageType=!0,t.loadMoreCallBackType=!0;try{if(t.DetailData.list.length>9&&"pageadd"==e){var i=t.DetailData;return a.list.forEach(function(a){i.list.push(a)}),t.DetailData=i,t.DetailData.pageNum=a.pageNum,!1}}catch(a){}(null==a||a.list.length<1)&&(t.loadingMessage="暂无服务"),a.total>10&&(t.loadingMessage="下拉加载更多"),a.total<10&&a.total>0&&(t.loadingMessage="已经全部加载完毕"),t.DetailData=a})},loadMoreCallBack:function(){try{if(!(1*this.DetailData.total>1*this.DetailData.list.length))return this.loadingMessage="已经全部加载完毕",!1;if(this.loading=!0,this.loadingType=!0,!this.loadMoreCallBackType)return!1;this.loadMoreCallBackType=!1,this.GetData(this.DetailData.pageNum+1,"pageadd")}catch(a){}},disabledloadMoreCallBack:function(){return!1},addChatNum:function(a,e,t){o.a.get({url:"app/attractinvestment/communicate",data:{params:{communicateType:a,toUser:e,number:t}}})},Communicate:function(a){this.addChatNum("4",a.id,a.number),$Hybrid.appToNative("makeChat",s()({id:"",title:"",userId:a.id,nickName:a.nickName,salary:"",describe:"",tagList:[],senderAvatar:"",senderName:"",timestamp:0,jobCity:"",isinvite:!1}))}}}),c={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"CommunicateList"}},[t("BaseTopbar",{attrs:{topbar:a.topbar}}),a._v(" "),t("div",{staticClass:"main"},[t("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:a.loadMore,expression:"loadMore"}],staticClass:"box",attrs:{"infinite-scroll-listen-for-event":a.disabledloadMore,"infinite-scroll-disabled":a.loading,"infinite-scroll-distance":"10"}},[t("div",{staticClass:"server-list"},[t("div",{staticClass:"margin"},a._l(a.DetailData.list,function(e,i){return t("div",{key:i,staticClass:"list"},[t("div",{staticClass:"list-left"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar+"?x-oss-process=image/resize,w_150",expression:"value.avatar+'?x-oss-process=image/resize,w_150'"}],attrs:{alt:""}}),a._v(" "),t("span",[a._v(a._s(e.nickName))])]),a._v(" "),t("div",{staticClass:"list-right"},[t("div",{staticClass:"btn-blue",on:{click:function(t){return a.Communicate(e)}}},[a._v("沟通")]),a._v(" "),a._e()])])}),0)]),a._v(" "),t("div",{staticClass:"loading-box"},[t("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:a.loadingType,expression:"loadingType"}],attrs:{type:"fading-circle",color:"#54c2a7"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.loadingMessageType,expression:"loadingMessageType"}]},[a._v(a._s(a.loadingMessage))])],1)])])],1)},staticRenderFns:[]};var u=t("VU/8")(d,c,!1,function(a){t("nfY1")},"data-v-3ec2aa0c",null);e.default=u.exports},nfY1:function(a,e){}});